(function(){"use strict";var e={8631:function(e,t,i){var a=i(5130),s=i(6768);const r={id:"app"},o={key:0,class:"app-header"},n={class:"logo-heading-container"},l=["src"],c={class:"app-nav"},d={key:1,class:"footer"};function u(e,t,u,p,h,m){const g=(0,s.g2)("router-link"),y=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",r,[h.isAuthenticated?((0,s.uX)(),(0,s.CE)("header",o,[(0,s.Lk)("div",n,[(0,s.Lk)("img",{src:i(1621),alt:"HealthyChef Logo",class:"logo"},null,8,l),t[3]||(t[3]=(0,s.Lk)("h1",{class:"header-title"},"HealthyChef",-1))]),(0,s.Lk)("nav",c,[(0,s.bF)(g,{to:"/",class:"nav-link"},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.Lk)("i",{class:"fas fa-home"},null,-1),(0,s.eW)(" Home ")]))),_:1}),(0,s.bF)(g,{to:"/dashboard",class:"nav-link"},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.Lk)("i",{class:"fas fa-tachometer-alt"},null,-1),(0,s.eW)(" Dashboard ")]))),_:1}),(0,s.bF)(g,{to:"/fridge",class:"nav-link"},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.Lk)("i",{class:"fas fa-ice-cream"},null,-1),(0,s.eW)(" Fridge Management ")]))),_:1}),(0,s.bF)(g,{to:"/recipes",class:"nav-link"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1),(0,s.eW)(" Recipes ")]))),_:1}),(0,s.bF)(g,{to:"/mealPlanner",class:"nav-link"},{default:(0,s.k6)((()=>t[8]||(t[8]=[(0,s.Lk)("i",{class:"fas fa-calendar-alt"},null,-1),(0,s.eW)(" Meal Planner ")]))),_:1}),(0,s.bF)(g,{to:"/community",class:"nav-link"},{default:(0,s.k6)((()=>t[9]||(t[9]=[(0,s.Lk)("i",{class:"fas fa-users"},null,-1),(0,s.eW)(" Community ")]))),_:1}),(0,s.bF)(g,{to:"/profile",class:"nav-link"},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.Lk)("i",{class:"fas fa-user"},null,-1),(0,s.eW)(" Profile ")]))),_:1}),(0,s.bF)(g,{to:"/logout",class:"nav-link",onClick:(0,a.D$)(m.logoutUser,["prevent"])},{default:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.eW)(" Logout ")]))),_:1},8,["onClick"])])])):(0,s.Q3)("",!0),(0,s.Lk)("main",{class:"container-fluid p-0",onMousemove:t[0]||(t[0]=(...e)=>m.resetTimer&&m.resetTimer(...e)),onKeydown:t[1]||(t[1]=(...e)=>m.resetTimer&&m.resetTimer(...e)),onClick:t[2]||(t[2]=(...e)=>m.resetTimer&&m.resetTimer(...e))},[(0,s.bF)(y)],32),h.isAuthenticated?((0,s.uX)(),(0,s.CE)("footer",d,t[12]||(t[12]=[(0,s.Lk)("p",null,"© 2024 HealthyChef. All rights reserved.",-1)]))):(0,s.Q3)("",!0)])}i(4114);var p=i(6971),h={name:"App",data(){return{timeout:null,idleTimeLimit:9e5,isAuthenticated:!1}},methods:{startTimer(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.logoutUser,this.idleTimeLimit)},resetTimer(){this.isAuthenticated&&this.startTimer()},logoutUser(){const e=(0,p.xI)();e.signOut().then((()=>{clearTimeout(this.timeout),this.isAuthenticated=!1,this.$router.push("/login")})).catch((e=>{console.error("Error logging out:",e)}))}},mounted(){const e=(0,p.xI)();(0,p.oM)(e,p.iM).then((()=>{(0,p.hg)(e,(e=>{this.isAuthenticated=!!e,e?(this.$router.push("/"),this.startTimer()):this.$router.push("/login")}))})).catch((e=>{console.error("Error setting persistence:",e)}))},beforeUnmount(){clearTimeout(this.timeout)}},m=i(1241);const g=(0,m.A)(h,[["render",u],["__scopeId","data-v-64e53f87"]]);var y=g,k=(i(8992),i(7550),i(1387)),_=i(6400),f=i(7617),v=i(7844);const b={apiKey:"AIzaSyAHb-fBzzoIx6kv-WyAo8Q7ZLwzlVq6jTc",authDomain:"healthychef-a4655.firebaseapp.com",projectId:"healthychef-a4655",storageBucket:"healthychef-a4655.firebasestorage.app",messagingSenderId:"1030137873458",appId:"1:1030137873458:web:fb757968eac65d00e5e82b"},L=(0,_.Wp)(b),C=(0,p.xI)(L),w=(0,f.aU)(L),I=new p.HF,E=((0,v.c7)(L),{class:"home-page-wrapper"});function D(e,t,i,a,r,o){const n=(0,s.g2)("HomeContent");return(0,s.uX)(),(0,s.CE)("div",E,[(0,s.bF)(n)])}var x=i(4232),R=i.p+"img/cauroselFridge.135016b3.jpg",P=i.p+"img/cauroselPlanner.8db39751.jpg";const F={class:"carousel"},A={id:"homeCarousel",class:"carousel slide","data-bs-ride":"carousel"},S={class:"carousel-inner"},U={class:"carousel-item carousel__item active"},X={class:"carousel-caption carousel__caption"},N={class:"carousel-item carousel__item"},M={class:"carousel-caption carousel__caption"},T={class:"carousel-item carousel__item"},$={class:"carousel-caption carousel__caption"},H={class:"home"},V={key:0,class:"container"},W={class:"home__title"},q={key:1};function Q(e,t,i,a,r,o){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("section",F,[(0,s.Lk)("div",A,[(0,s.Lk)("div",S,[(0,s.Lk)("div",U,[t[3]||(t[3]=(0,s.Lk)("img",{src:"https://plus.unsplash.com/premium_photo-1673108852141-e8c3c22a4a22?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",class:"d-block w-100 carousel__image",alt:"Healthy Recipes"},null,-1)),(0,s.Lk)("div",X,[t[1]||(t[1]=(0,s.Lk)("h2",{class:"carousel__title"},"Cook Healthier, Live Better",-1)),t[2]||(t[2]=(0,s.Lk)("p",{class:"carousel__text"},"Explore personalized healthy recipes based on your ingredients and dietary preferences.",-1)),(0,s.bF)(n,{to:"/recipes",class:"cta"},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.eW)("Discover Recipes")]))),_:1})])]),(0,s.Lk)("div",N,[t[7]||(t[7]=(0,s.Lk)("img",{src:R,class:"d-block w-100 carousel__image",alt:"Virtual Fridge"},null,-1)),(0,s.Lk)("div",M,[t[5]||(t[5]=(0,s.Lk)("h2",{class:"carousel__title"},"Virtual Fridge Management",-1)),t[6]||(t[6]=(0,s.Lk)("p",{class:"carousel__text"},"Track your ingredients and receive expiry alerts.",-1)),(0,s.bF)(n,{to:"/fridge",class:"cta"},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.eW)("Manage Fridge")]))),_:1})])]),(0,s.Lk)("div",T,[t[11]||(t[11]=(0,s.Lk)("img",{src:P,class:"d-block w-100 carousel__image",alt:"Plan Your Meal"},null,-1)),(0,s.Lk)("div",$,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"carousel__title"},"Plan Your Meals",-1)),t[10]||(t[10]=(0,s.Lk)("p",{class:"carousel__text"},"Use up what you have and recieve recipes taylored to what you have.",-1)),(0,s.bF)(n,{to:"/mealplanner",class:"cta cta--planner"},{default:(0,s.k6)((()=>t[8]||(t[8]=[(0,s.eW)("Plan Your Meals")]))),_:1})])])]),t[12]||(t[12]=(0,s.Fv)('<button class="carousel__control carousel__control--prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel__control carousel__control--next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2))])]),(0,s.Lk)("div",H,[r.user?((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("h1",W,"Welcome to HealthyChef, "+(0,x.v_)(r.user.displayName),1),t[13]||(t[13]=(0,s.Lk)("p",{class:"home__intro"}," HealthyChef encourages Singaporeans to cook healthier meals at home by offering a wide range of personalized healthy meal recipes. ",-1))])):((0,s.uX)(),(0,s.CE)("div",q,t[14]||(t[14]=[(0,s.Lk)("p",null,"Loading user information...",-1)]))),t[15]||(t[15]=(0,s.Fv)('<div class="features"><div class="features__item"><h2 class="features__title">Personalized Recipes</h2><p class="features__description">Receive meal suggestions tailored to your available ingredients and dietary preferences for a balanced diet.</p></div><div class="features__item"><h2 class="features__title">Virtual Fridge Management</h2><p class="features__description">Keep track of your ingredients and get notified before they expire with our virtual fridge and expiry alerts.</p></div><div class="features__item"><h2 class="features__title">Reduce Food Waste</h2><p class="features__description">Minimize food waste by using what you already have and exploring new recipes based on your inventory.</p></div></div>',1))])])}var O={name:"HomeContent",data(){return{user:null}},async created(){const e=C.currentUser;if(e)try{const t=(0,f.H9)(w,"users",e.uid),i=await(0,f.x7)(t);i.exists()?this.user=i.data():console.error("No such document!")}catch(t){console.error("Error fetching user data:",t.message),this.$router.push("/login")}else this.$router.push("/login")},methods:{async logout(){try{await(0,p.CI)(C),localStorage.removeItem("user"),this.$router.push("/login")}catch(e){alert("Logout failed: "+e.message)}}}};const J=(0,m.A)(O,[["render",Q]]);var G=J,B=(0,s.pM)({name:"HomePage",components:{HomeContent:G}});const K=(0,m.A)(B,[["render",D]]);var j=K;const Y={class:"add-item-page"};function z(e,t,i,a,r,o){const n=(0,s.g2)("AddItem");return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.bF)(n)])}var Z=i.p+"img/emptyFridge.c691c91c.jpg";const ee={class:"app-fridge"},te={class:"container-fluid"},ie={class:"content"},ae={class:"app-fridge__header"},se=["disabled"],re={key:0},oe={key:1},ne=["disabled"],le={key:1,class:"card app-fridge__add-card"},ce={class:"app-fridge__card-body"},de={class:"app-fridge__card-title"},ue={class:"app-fridge__title"},pe={key:0,class:"app-fridge__error-message"},he={class:"mb-3"},me={class:"mb-3"},ge=["value"],ye={class:"mb-3"},ke={class:"mb-3"},_e={type:"submit",class:"btn btn-success app-fridge__button--add"},fe={key:0},ve={class:"appFridge__category-header"},be={class:"appFridge__category-container"},Le=["onClick"],Ce={class:"appFridge__sort-button"},we=["onClick","disabled"],Ie=["onClick","disabled"],Ee={key:0,class:"row g-4"},De={class:"card-body"},xe={class:"card-title"},Re={class:"card-info"},Pe={class:"app-fridge__card-text"},Fe={class:"app-fridge__card-text"},Ae={class:"mt-auto d-flex flex-column"},Se=["onClick","disabled"],Ue=["onClick","disabled"];function Xe(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("div",ie,[(0,s.Lk)("header",ae,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"btn btn-sm me-2 app-fridge__button--top",onClick:t[0]||(t[0]=(...e)=>n.sortByCategory&&n.sortByCategory(...e)),disabled:o.openAddCard},[t[9]||(t[9]=(0,s.eW)(" Category ")),o.isCategoryAscending?((0,s.uX)(),(0,s.CE)("span",re,"↑")):((0,s.uX)(),(0,s.CE)("span",oe,"↓"))],8,se),(0,s.Lk)("button",{class:"btn btn-sm me-2 app-fridge__button--top",onClick:t[1]||(t[1]=e=>n.navigateTo("summary")),disabled:o.openAddCard},"View Inventory Summary",8,ne),o.openAddCard||o.isEditing?((0,s.uX)(),(0,s.CE)("div",le,[(0,s.Lk)("div",ce,[(0,s.Lk)("div",de,[(0,s.Lk)("h5",ue,(0,x.v_)(o.isEditing?"Edit Product":"Add Product")+" 🥕🍇🍞🥗",1),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.closeAddCard&&n.closeAddCard(...e)),class:"btn btn-light app-fridge__button--close"},"X")]),t[15]||(t[15]=(0,s.Lk)("hr",null,null,-1)),o.validationError?((0,s.uX)(),(0,s.CE)("p",pe,(0,x.v_)(o.validationError),1)):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)((e=>o.isEditing?n.saveEdit():n.addItem()),["prevent"]))},[(0,s.Lk)("div",he,[t[10]||(t[10]=(0,s.Lk)("label",{for:"itemName"},"Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.itemName=e),class:"form-control",type:"text",id:"itemName",maxlength:"20",placeholder:"Insert Name",required:""},null,512),[[a.Jo,o.itemName]])]),(0,s.Lk)("div",me,[t[12]||(t[12]=(0,s.Lk)("label",{for:"category"},"Category",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemCategory=e),class:"form-select",id:"category",required:""},[t[11]||(t[11]=(0,s.Lk)("option",{disabled:"",value:"",selected:""},"Please Select",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.categories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,x.v_)(e),9,ge)))),128))],512),[[a.u1,o.itemCategory]])]),(0,s.Lk)("div",ye,[t[13]||(t[13]=(0,s.Lk)("label",{for:"quantity"},"Quantity",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.itemQuantity=e),class:"form-control",type:"number",id:"quantity",min:"1",placeholder:"1",required:""},null,512),[[a.Jo,o.itemQuantity]])]),(0,s.Lk)("div",ke,[t[14]||(t[14]=(0,s.Lk)("label",{for:"expiryDate"},"Expiry Date",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.itemExpiryDate=e),class:"form-control",type:"date",id:"expiryDate",required:""},null,512),[[a.Jo,o.itemExpiryDate]])]),(0,s.Lk)("button",_e,(0,x.v_)(o.isEditing?"Save":"Add!"),1)],32)])])):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[2]||(t[2]=e=>o.openAddCard=!0),class:"btn btn-sm app-fridge__button--top"}," Add Product "))])]),o.items&&0!==o.items.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",fe,t[16]||(t[16]=[(0,s.eW)(" Your Fridge is Empty ~🍂"),(0,s.Lk)("br",null,null,-1),(0,s.Lk)("img",{class:"img-fluid",style:{width:"300px"},src:Z,alt:"Empty Fridge"},null,-1)]))),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.finalItems,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"col-12"},[(0,s.Lk)("div",ve,[(0,s.Lk)("div",be,[(0,s.Lk)("h5",{class:"m-0 flex-grow-1 d-flex align-items-start appFridge__category-title",onClick:e=>n.toggleCategory(t)},(0,x.v_)(t),9,Le),(0,s.Lk)("div",Ce,[(0,s.Lk)("button",{class:"btn btn-sm me-2 appFridge__button--sort",onClick:e=>n.sortCategorizedItems(t,"quantity"),disabled:o.openAddCard}," Sort by Quantity ",8,we),(0,s.Lk)("button",{class:"btn btn-sm appFridge__button--sort",onClick:e=>n.sortCategorizedItems(t,"expiryDate"),disabled:o.openAddCard}," Sort by Expiry Date ",8,Ie)])])]),o.collapsedCategories[t]?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"col-sm-6 col-md-4 col-lg-3 col-xl-2"},[(0,s.Lk)("div",{class:(0,x.C4)(["card mb-4 mx-4 app-fridge__filter-card",{"app-fridge__expiring-soon":e.isExpiringSoon}])},[(0,s.Lk)("div",De,[(0,s.Lk)("h6",xe,(0,x.v_)(e.name),1),(0,s.Lk)("div",Re,[(0,s.Lk)("p",Pe,"Expiry Date: "+(0,x.v_)(e.expiryDate),1),(0,s.Lk)("p",Fe,"Quantity: "+(0,x.v_)(e.quantity),1)]),(0,s.Lk)("div",Ae,[(0,s.Lk)("button",{class:"btn btn-secondary btn-sm mb-1 app-fridge__card-btn",onClick:t=>n.editItem(e),disabled:o.openAddCard},"Edit",8,Se),(0,s.Lk)("button",{class:"btn btn-danger btn-sm app-fridge__card-btn",onClick:t=>n.deleteItem(e.id),disabled:o.openAddCard},"Delete",8,Ue)])])],2)])))),128))]))])))),128))])])])}i(4520),i(2577),i(3949),i(1454),i(323);var Ne={name:"FridgePage",data(){return{currentUserId:null,items:[],sortedItems:{},sortOrder:"asc",isCategoryAscending:!1,openAddCard:!1,itemId:"",itemName:"",itemCategory:"",itemQuantity:1,itemExpiryDate:"",validationError:"",isEditing:!1,itemToEdit:null,categories:["Dairy","Fruits","Vegetables","Meats","Seafood","Grains and Cereals","Nuts and Seeds","Legumes","Beverages","Snacks","Condiments and Sauces","Herbs and Spices","Frozen Foods","Baked Goods","Canned and Jarred Goods","Deli","Prepared Meals","Pantry Staples","Breakfast Foods","Sweets and Desserts","Non-Alcoholic Drinks","Alcoholic Drinks","Others"],collapsedCategories:{}}},methods:{toggleCategory(e){this.collapsedCategories[e]=!this.collapsedCategories[e]},navigateTo(e){"summary"===e?this.$router.push({name:"Summary"}):"customize"===e&&this.$router.push({name:"Customize"})},async getCurrentUserItems(){const e=new Date;if(e.setHours(0,0,0,0),this.currentUserId)try{const t=(0,f.rJ)(w,`users/${this.currentUserId}/items`),i=await(0,f.GG)(t);this.items=[],i.forEach((t=>{const i={id:t.id,...t.data()},a=new Date(i.expiryDate),s=(a-e)/864e5;i.isExpiringSoon=s<=3,this.items.push(i)})),this.sortItems("name")}catch(t){console.error("Error fetching items: ",t)}},sortByCategory(){this.isCategoryAscending=!this.isCategoryAscending,"asc"===this.sortOrder?(this.items.sort(((e,t)=>e.category.localeCompare(t.category))),this.sortOrder="desc"):(this.items.sort(((e,t)=>t.category.localeCompare(e.category))),this.sortOrder="asc")},sortItems(){this.items.sort(((e,t)=>e.name.localeCompare(t.name)))},sortCategorizedItems(e,t){if(!this.categorizedItems[e])return void console.error(`No items found for category: ${e}`);const i=[...this.categorizedItems[e]];if("quantity"===t)i.sort(((e,t)=>e.quantity-t.quantity));else{if("expiryDate"!==t)return void console.error(`Unknown sort criteria: ${t}`);i.sort(((e,t)=>new Date(e.expiryDate)-new Date(t.expiryDate)))}this.sortedItems[e]=i,console.log(`Sorted ${e} by ${t}`,i)},closeAddCard(){this.openAddCard=!1,this.validationError="",this.resetForm()},async addItem(){this.validationError="",console.log("Adding Item:",{name:this.itemName,category:this.itemCategory,expiryDate:this.itemExpiryDate});const e=this.items.find((e=>e.name.toLowerCase()===this.itemName.toLowerCase()&&e.category===this.itemCategory&&e.expiryDate===this.itemExpiryDate));if(e)return void(this.validationError="An item with this name and category already exists.");const t=new Date;t.setHours(0,0,0,0);const i=new Date(this.itemExpiryDate);if(i.setHours(0,0,0,0),i<t)return void(this.validationError="The expiry date must be set to a date after today.");const a=(i-t)/864e5,s=a<=3;let r=this.capitalizeFirstLetter(this.itemName);console.log("Item to add:",{name:r,category:this.itemCategory,quantity:this.itemQuantity,expiryDate:this.itemExpiryDate,isExpiringSoon:s,createdDate:(new Date).toISOString()});try{const e=await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/items`),{name:r,category:this.itemCategory,quantity:this.itemQuantity,expiryDate:this.itemExpiryDate,isExpiringSoon:s,createdDate:(new Date).toISOString()}),t={id:e.id,name:r,category:this.itemCategory,quantity:this.itemQuantity,expiryDate:this.itemExpiryDate,isExpiringSoon:s,createdDate:(new Date).toISOString()};this.items.push(t),this.sortItems("name"),this.resetForm(),this.openAddCard=!1}catch(o){console.error("Error adding item: ",o)}},resetForm(){this.itemId=null,this.itemName="",this.itemCategory="",this.itemQuantity=1,this.itemExpiryDate="",this.validationError="",this.isEditing=!1,this.isExpiringSoon=!1,this.itemToEdit=null,this.openAddCard=!1},editItem(e){this.isEditing=!0,this.itemName=e.name,this.itemCategory=e.category,this.itemExpiryDate=e.expiryDate,this.itemId=e.id,this.itemQuantity=e.quantity||0,this.isExpiringSoon=e.isExpiringSoon||!1,this.openAddCard=!0},async deleteItem(e){const t=(0,f.H9)(w,`users/${this.currentUserId}/items`,e);try{const i=await(0,f.x7)(t);i.exists()?(await(0,f.kd)(t),console.log("Item deleted."),this.items=this.items.filter((t=>t.id!==e))):console.error("Item not found: ",e)}catch(i){console.error("Error deleting item: ",i)}},async saveEdit(){const e={id:this.itemId,name:this.itemName,category:this.itemCategory,expiryDate:this.itemExpiryDate,quantity:this.itemQuantity||0,isExpiringSoon:this.isExpiringSoon||!1},t=new Date(e.expiryDate),i=new Date;i.setHours(0,0,0,0),t<i?this.validationError="Expiry date cannot be in the past.":this.updateItemInFirestore(e).then((()=>{this.resetForm()})).catch((e=>{console.error("Error updating item: ",e)}))},async updateItemInFirestore(e){try{const t=(0,f.H9)(w,`users/${this.currentUserId}/items`,e.id);await(0,f.mZ)(t,{name:e.name,category:e.category,quantity:e.quantity,expiryDate:e.expiryDate,isExpiringSoon:e.isExpiringSoon});const i=this.items.findIndex((t=>t.id===e.id));-1!==i&&(this.items[i]=e),await this.getCurrentUserItems()}catch(t){console.error("Error updating item in Firestore: ",t)}},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},async moveExpiredItemsToBin(){const e=new Date;e.setHours(0,0,0,0);try{for(const t of this.items){const i=new Date(t.expiryDate);i.setHours(0,0,0,0),i<e&&(await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/expiredItemsWOUsing`),{...t,movedToBinAt:(new Date).toISOString()}),await(0,f.kd)((0,f.H9)(w,`users/${this.currentUserId}/items`,t.id)),console.log(`Moved expired item to bin: ${t.name}`))}await this.getCurrentUserItems()}catch(t){console.error("Error moving expired items to bin:",t)}},getAvailableIngredients(){return this.items.map((e=>e.name)).join(",")}},computed:{categorizedItems(){const e={};return this.items.forEach((t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)})),e},finalItems(){const e={};for(const t in this.categorizedItems)e[t]=this.sortedItems[t]||this.categorizedItems[t];return e}},mounted(){(0,p.hg)(C,(async e=>{e&&(this.currentUserId=e.uid,await this.getCurrentUserItems(),await this.moveExpiredItemsToBin())}))}};const Me=(0,m.A)(Ne,[["render",Xe]]);var Te=Me,$e=(0,s.pM)({name:"AddItemPage",components:{AddItem:Te}});const He=(0,m.A)($e,[["render",z]]);var Ve=He;const We={class:"overview-page"};function qe(e,t,i,a,r,o){const n=(0,s.g2)("FridgeOverview");return(0,s.uX)(),(0,s.CE)("div",We,[(0,s.bF)(n)])}const Qe={class:"app-summary"},Oe={class:"app-summary__list"},Je={class:"app-summary__list"},Ge={class:"app-summary__list"},Be={class:"app-summary__list"};function Ke(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",Qe,[t[1]||(t[1]=(0,s.Lk)("h1",{class:"app-summary__title"},"Inventory Summary",-1)),t[2]||(t[2]=(0,s.Lk)("h3",{class:"app-summary__section-title app-summary__section-title--h3"},"Daily Summary",-1)),(0,s.Lk)("p",null,"Total Items: "+(0,x.v_)(r.summary.totalItems),1),(0,s.Lk)("p",null,"Items Expiring Soon: "+(0,x.v_)(r.summary.expiringSoon),1),t[3]||(t[3]=(0,s.Lk)("h4",{class:"app-summary__section-title app-summary__section-title--h4"},"Category Breakdown:",-1)),(0,s.Lk)("ul",Oe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.summary.categories,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{class:"app-summary__list-item",key:t},(0,x.v_)(t)+": "+(0,x.v_)(e),1)))),128))]),t[4]||(t[4]=(0,s.Lk)("h4",{class:"app-summary__section-title app-summary__section-title--h4"},"Newly Added Items:",-1)),(0,s.Lk)("ul",Je,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.summary.newlyAdded,(e=>((0,s.uX)(),(0,s.CE)("li",{class:"app-summary__list-item",key:e.id},(0,x.v_)(e.name),1)))),128))]),t[5]||(t[5]=(0,s.Lk)("h4",{class:"app-summary__section-title app-summary__section-title--h4"},"Recently Used Items:",-1)),(0,s.Lk)("ul",Ge,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.summary.deletedItems,(e=>((0,s.uX)(),(0,s.CE)("li",{class:"app-summary__list-item",key:e.id},(0,x.v_)(e.name)+" (Deleted on: "+(0,x.v_)(e.deletedAt)+")",1)))),128))]),t[6]||(t[6]=(0,s.Lk)("h4",{class:"app-summary__section-title app-summary__section-title--h4"},"Expired Items:",-1)),(0,s.Lk)("ul",Be,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.summary.expiredItems,(e=>((0,s.uX)(),(0,s.CE)("li",{class:"app-summary__list-item",key:e.id},(0,x.v_)(e.name)+" (Expired on: "+(0,x.v_)(e.expiryDate)+")",1)))),128))]),(0,s.Lk)("button",{class:"app-summary__button app-summary__button--secondary",onClick:t[0]||(t[0]=(...e)=>o.goToInventory&&o.goToInventory(...e))},"Back to Inventory")])}i(8872);var je={data(){return{currentUserId:null,summary:{totalItems:0,expiringSoon:0,categories:{},newlyAdded:[],deletedItems:[],expiredItems:[]}}},setup(){const e=(0,k.rd)();return{router:e}},methods:{goToInventory(){this.router.push("/fridge")},async fetchSummaryData(){const e=new Date,t=new Date(e);t.setDate(e.getDate()-3);try{const i=C.currentUser;if(!i)throw new Error("User not authenticated");this.currentUserId=i.uid;const a=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/items`)),s=a.docs.map((e=>({id:e.id,...e.data()})));this.summary.totalItems=s.length,this.summary.expiringSoon=s.filter((t=>{const i=new Date(t.expiryDate);return i>e&&i<=new Date(e.getTime()+2592e5)})).length,this.summary.categories=s.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+1,e)),{});const r=s.filter((i=>{const a=new Date(i.createdDate);return a>=t&&a<=e})).map((e=>({...e,createdDate:new Date(e.createdDate).toLocaleString()})));this.summary.newlyAdded=r;const o=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/deletedItems`)),n=o.docs.map((e=>{const t=e.data();return{id:e.id,...t,deletedAt:new Date(t.deletedAt).toLocaleString()}}));this.summary.deletedItems=n.filter((i=>{const a=new Date(i.deletedAt);return a>=t&&a<=e}));const l=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/expiredItemsWOUsing`)),c=l.docs.map((e=>{const t=e.data();return{id:e.id,...t,expiryDate:new Date(t.expiryDate).toLocaleString()}}));this.summary.expiredItems=c.filter((i=>{const a=new Date(i.expiryDate);return a<e&&a>=t}))}catch(i){console.error("Error fetching summary data: ",i)}}},mounted(){this.fetchSummaryData()}};const Ye=(0,m.A)(je,[["render",Ke]]);var ze=Ye,Ze=(0,s.pM)({name:"OverviewPage",components:{FridgeOverview:ze}});const et=(0,m.A)(Ze,[["render",qe]]);var tt=et;const it={class:"notification-form"};function at(e,t){return(0,s.uX)(),(0,s.CE)("div",it,t[0]||(t[0]=[(0,s.Fv)('<h2 class="form-title" data-v-094db4d1>Notification Preferences</h2><form id="notificationSettingsForm" data-v-094db4d1><div class="form-group" data-v-094db4d1><label for="daysBeforeExpiry" data-v-094db4d1>Notify me before an item expires (in days):</label><input type="number" class="form-control" id="daysBeforeExpiry" min="1" max="30" value="3" required data-v-094db4d1></div><div class="form-group" data-v-094db4d1><label data-v-094db4d1>Preferred Notification Method:</label><div data-v-094db4d1><label data-v-094db4d1><input type="checkbox" value="email" class="notification-checkbox" data-v-094db4d1> Email </label><label data-v-094db4d1><input type="checkbox" value="sms" class="notification-checkbox" data-v-094db4d1> SMS </label><label data-v-094db4d1><input type="checkbox" value="app" class="notification-checkbox" data-v-094db4d1> In-App Notification </label></div></div><div class="form-group" data-v-094db4d1><label for="notificationFrequency" data-v-094db4d1>How often to notify:</label><select class="form-control" id="notificationFrequency" required data-v-094db4d1><option value="once" data-v-094db4d1>Once</option><option value="daily" data-v-094db4d1>Daily until expired</option><option value="weekly" data-v-094db4d1>Weekly until expired</option></select></div><button type="submit" class="btn btn-primary btn-block" data-v-094db4d1>Save Preferences</button></form>',2)]))}const st={},rt=(0,m.A)(st,[["render",at],["__scopeId","data-v-094db4d1"]]);var ot=rt;const nt={class:"meal-planner-page"};function lt(e,t,i,a,r,o){const n=(0,s.g2)("MealPlannerComponent");return(0,s.uX)(),(0,s.CE)("div",nt,[(0,s.bF)(n)])}const ct={class:"planner"},dt={class:"planner__column planner__column--left"},ut={class:"planner__column planner__column--center"},pt={class:"planner__title"},ht={class:"controls"},mt={class:"controls__center"},gt={key:0},yt={class:"calendar"},kt={class:"calendar__table"},_t={class:"calendar__week"},ft=["onClick"],vt={key:0,class:"calendar__date"},bt={key:1,class:"calendar__meal-container"},Lt=["onClick","title"],Ct={class:"planner__column planner__column--right"};function wt(e,t,i,r,o,n){const l=(0,s.g2)("RecipeTracker"),c=(0,s.g2)("ShoppingList"),d=(0,s.g2)("AddRecipeModal"),u=(0,s.g2)("RecipeDetailsModal"),p=(0,s.g2)("DayPlanPopup");return(0,s.uX)(),(0,s.CE)("div",ct,[(0,s.Lk)("div",dt,[(0,s.bF)(l,{ref:"recipeTracker"},null,512)]),(0,s.Lk)("div",ut,[(0,s.Lk)("h1",pt,"Meal Planner for "+(0,x.v_)(n.formattedMonthYear),1),(0,s.Lk)("div",ht,[(0,s.Lk)("button",{class:"nav-button",onClick:t[0]||(t[0]=(...e)=>n.prevMonth&&n.prevMonth(...e))},"Previous"),(0,s.Lk)("div",mt,[o.selectedDay?((0,s.uX)(),(0,s.CE)("p",gt,"Selected Day: "+(0,x.v_)(n.selectedDayText),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{class:"nav-button",onClick:t[1]||(t[1]=(...e)=>n.nextMonth&&n.nextMonth(...e))},"Next")]),(0,s.Lk)("div",yt,[(0,s.Lk)("table",kt,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[t[2]||(t[2]=(0,s.Lk)("th",{class:"calendar__header"},"Wk",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.weekDays,(e=>((0,s.uX)(),(0,s.CE)("th",{key:e,class:"calendar__header"},(0,x.v_)(e),1)))),128))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.calendar,((e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",_t,(0,x.v_)(t+1),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("td",{key:t,class:(0,x.C4)(["calendar__cell",{"calendar__cell--selected":e===o.selectedDay,"calendar__cell--today":n.isToday(e),"calendar__cell--past":n.isPastDate(e)}]),onClick:t=>n.handleDayClick(e)},[e?((0,s.uX)(),(0,s.CE)("span",vt,(0,x.v_)(e),1)):(0,s.Q3)("",!0),e&&o.mealPlan[e]?((0,s.uX)(),(0,s.CE)("div",bt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.mealPlan[e],((t,i)=>((0,s.uX)(),(0,s.CE)("div",{key:t.uri,class:"calendar__meal",onClick:(0,a.D$)((a=>n.openRecipeDetails(t,e,i)),["stop"]),title:t.label},(0,x.v_)(t.label),9,Lt)))),128))])):(0,s.Q3)("",!0)],10,ft)))),128))])))),128))])])])]),(0,s.Lk)("div",Ct,[(0,s.bF)(c,{ingredients:o.shoppingList,onUpdate:n.updateShoppingList},null,8,["ingredients","onUpdate"])]),(0,s.bF)(d,{show:o.showRecipeModal,"selected-day":o.selectedDay,"month-year":n.formattedMonthYear,"meal-type":o.mealType,onClose:n.closeRecipeModal,onAddRecipe:n.addRecipeToDay,onFetchAvailableIngredients:n.fetchAvailableIngredients},null,8,["show","selected-day","month-year","meal-type","onClose","onAddRecipe","onFetchAvailableIngredients"]),o.showRecipeDetails?((0,s.uX)(),(0,s.Wv)(u,{key:0,recipe:o.selectedRecipe,day:o.selectedDay,"month-year":n.formattedMonthYear,"selected-recipe-index":o.selectedRecipeIndex,onClose:n.closeRecipeDetails,onDeleteRecipe:n.deleteRecipe,onAddToShoppingList:n.addToShoppingList,onRecipeCompleted:n.handleRecipeCompleted},null,8,["recipe","day","month-year","selected-recipe-index","onClose","onDeleteRecipe","onAddToShoppingList","onRecipeCompleted"])):(0,s.Q3)("",!0),(0,s.bF)(p,{show:o.showDayPlanPopup,selectedDay:n.selectedDayText,meals:n.selectedDayMeals,onClose:n.closeDayPlanPopup,onAddRecipe:n.handleAddRecipe,onClearDay:n.clearDayMeals,onDeleteRecipe:n.deleteRecipe,onShowRecipeDetails:n.handleShowRecipeDetails},null,8,["show","selectedDay","meals","onClose","onAddRecipe","onClearDay","onDeleteRecipe","onShowRecipeDetails"])])}const It={key:0,class:"recipe-modal"},Et={class:"recipe-modal__card"},Dt={class:"recipe-modal__card-body"},xt={class:"recipe-modal__card-title"},Rt={class:"recipe-modal__title"},Pt={class:"recipe-modal__form-group mb-3"},Ft={class:"recipe-modal__input-group d-flex"},At={key:0,class:"recipe-modal__available-ingredients mt-3 d-flex align-items-center justify-content-between"},St={class:"d-flex align-items-center"},Ut={class:"recipe-modal__ingredient-list d-flex flex-wrap"},Xt={class:"form-check"},Nt=["value","id"],Mt=["for"],Tt={key:1,class:"recipe-modal__favorites mt-4"},$t={class:"recipe-modal__favorites-title"},Ht={key:0,class:"recipe-modal__favorites-content"},Vt={class:"recipe-modal__recipe-list"},Wt={class:"d-flex flex-column"},qt={class:"d-flex justify-content-between align-items-start"},Qt=["onClick"],Ot=["onClick"],Jt={key:0,class:"recipe-modal__nutrition-info mt-2"},Gt={class:"text-muted d-block"},Bt={class:"d-flex gap-2 mt-1"},Kt={key:0,class:"text-muted"},jt={key:1,class:"text-muted"},Yt={key:2,class:"text-muted"},zt={class:"recipe-modal__results mt-4"},Zt={key:0,class:"recipe-modal__results-title mb-3"},ei={key:1,class:"recipe-modal__recipe-list"},ti={class:"d-flex justify-content-between align-items-center"},ii=["onClick"],ai=["onClick"],si={key:2,class:"recipe-modal__no-results text-center text-muted"},ri={key:0,class:"recipe-preview-modal"},oi={class:"recipe-preview-modal__content"},ni={class:"recipe-preview-modal__header"},li={class:"recipe-preview-modal__info"},ci={key:0,class:"recipe-preview-modal__image"},di=["src","alt"],ui={class:"recipe-preview-modal__details"},pi={class:"recipe-preview-modal__nutrition"},hi={class:"recipe-preview-modal__nutrition-list"},mi={key:0},gi={key:1},yi={key:2},ki={class:"recipe-preview-modal__ingredients"},_i={class:"recipe-preview-modal__list"},fi={class:"recipe-preview-modal__ingredients-list"};function vi(e,t,i,r,o,n){return i.show?((0,s.uX)(),(0,s.CE)("div",It,[(0,s.Lk)("div",Et,[(0,s.Lk)("div",Dt,[(0,s.Lk)("div",xt,[(0,s.Lk)("h5",Rt,"Add "+(0,x.v_)(i.mealType)+" Recipe for "+(0,x.v_)(i.selectedDay)+" "+(0,x.v_)(i.monthYear)+" 🥗🍳",1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e)),class:"recipe-modal__btn-close btn btn-light"},"X")]),t[11]||(t[11]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>n.searchRecipes&&n.searchRecipes(...e)),["prevent"]))},[(0,s.Lk)("div",Pt,[t[8]||(t[8]=(0,s.Lk)("label",{class:"recipe-modal__form-label",for:"searchQuery"},"Search Recipes",-1)),(0,s.Lk)("div",Ft,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.query=e),class:"recipe-modal__input form-control me-2",type:"text",id:"searchQuery",placeholder:"Enter recipe name or ingredients",required:""},null,512),[[a.Jo,o.query]]),t[7]||(t[7]=(0,s.Lk)("button",{type:"submit",class:"recipe-modal__btn-search btn btn-success"},"Search",-1))])]),n.validIngredients.length?((0,s.uX)(),(0,s.CE)("div",At,[(0,s.Lk)("div",St,[t[9]||(t[9]=(0,s.Lk)("h6",{class:"recipe-modal__available-ingredients-title me-2"},"Available Ingredients:",-1)),(0,s.Lk)("ul",Ut,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.validIngredients,((e,i)=>((0,s.uX)(),(0,s.CE)("li",{key:i,class:"recipe-modal__ingredient-item me-2"},[(0,s.Lk)("div",Xt,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e.name,"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedIngredients=e),id:"ingredient-"+i,class:"recipe-modal__checkbox form-check-input"},null,8,Nt),[[a.lH,o.selectedIngredients]]),(0,s.Lk)("label",{for:"ingredient-"+i,class:"recipe-modal__checkbox-label form-check-label",style:(0,x.Tr)({color:n.isExpiringSoon(e)?"#dc3545":"inherit"})},(0,x.v_)(e.name),13,Mt)])])))),128))])]),(0,s.Lk)("button",{type:"button",class:"recipe-modal__btn-use-ingredients btn btn-success",onClick:t[3]||(t[3]=(...e)=>n.useAvailableIngredients&&n.useAvailableIngredients(...e))},"Use Available Ingredients")])):(0,s.Q3)("",!0),o.favoriteRecipes.length?((0,s.uX)(),(0,s.CE)("div",Tt,[(0,s.Lk)("div",{class:"recipe-modal__favorites-header",onClick:t[4]||(t[4]=(...e)=>n.toggleFavorites&&n.toggleFavorites(...e))},[(0,s.Lk)("h6",$t,[t[10]||(t[10]=(0,s.eW)(" Your Favorite Recipes ")),(0,s.Lk)("i",{class:(0,x.C4)(["fas",o.showFavorites?"fa-chevron-up":"fa-chevron-down"])},null,2)])]),o.showFavorites?((0,s.uX)(),(0,s.CE)("div",Ht,[(0,s.Lk)("div",Vt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.favoriteRecipes,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"recipe-modal__recipe-item"},[(0,s.Lk)("div",Wt,[(0,s.Lk)("div",qt,[(0,s.Lk)("span",{class:(0,x.C4)(["recipe-modal__recipe-label",{selected:o.selectedRecipe?.uri===e.uri}]),onClick:t=>n.selectFavoriteRecipe(e)},(0,x.v_)(e.label),11,Qt),(0,s.Lk)("button",{class:"recipe-modal__btn-add btn btn-success btn-sm",onClick:(0,a.D$)((t=>n.addRecipe(e)),["stop"])}," Add ",8,Ot)]),e.totalNutrients?((0,s.uX)(),(0,s.CE)("div",Jt,[(0,s.Lk)("small",Gt," Calories: "+(0,x.v_)(Math.round(e.calories/(e.yield||1)))+" per serving ",1),(0,s.Lk)("div",Bt,[e.totalNutrients.PROCNT?((0,s.uX)(),(0,s.CE)("small",Kt," Protein: "+(0,x.v_)(Math.round(e.totalNutrients.PROCNT.quantity/(e.yield||1)))+"g ",1)):(0,s.Q3)("",!0),e.totalNutrients.FAT?((0,s.uX)(),(0,s.CE)("small",jt," Fat: "+(0,x.v_)(Math.round(e.totalNutrients.FAT.quantity/(e.yield||1)))+"g ",1)):(0,s.Q3)("",!0),e.totalNutrients.CHOCDF?((0,s.uX)(),(0,s.CE)("small",Yt," Carbs: "+(0,x.v_)(Math.round(e.totalNutrients.CHOCDF.quantity/(e.yield||1)))+"g ",1)):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])])))),128))])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",zt,[o.recipes.length>0?((0,s.uX)(),(0,s.CE)("h6",Zt,"Search Results:")):(0,s.Q3)("",!0),o.recipes.length>0?((0,s.uX)(),(0,s.CE)("div",ei,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.recipes,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.recipe.uri,class:"recipe-modal__recipe-item"},[(0,s.Lk)("div",ti,[(0,s.Lk)("span",{class:(0,x.C4)(["recipe-modal__recipe-label",{selected:o.selectedRecipe?.uri===e.recipe.uri}]),onClick:t=>n.selectRecipe(e.recipe)},(0,x.v_)(e.recipe.label),11,ii),(0,s.Lk)("button",{class:"recipe-modal__btn-add btn btn-success btn-sm",onClick:(0,a.D$)((t=>n.addRecipe(e.recipe)),["stop"])}," Add ",8,ai)])])))),128))])):o.hasSearched?((0,s.uX)(),(0,s.CE)("p",si," No recipes found. Try a different search term. ")):(0,s.Q3)("",!0)])])]),o.selectedRecipe?((0,s.uX)(),(0,s.CE)("div",ri,[(0,s.Lk)("div",oi,[(0,s.Lk)("div",ni,[t[12]||(t[12]=(0,s.Lk)("h5",{class:"recipe-preview-modal__title"},"Recipe Preview 🥗🍳",-1)),(0,s.Lk)("button",{class:"recipe-preview-modal__close-btn",onClick:t[6]||(t[6]=(...e)=>n.closePreview&&n.closePreview(...e))},"X")]),t[21]||(t[21]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",li,[(0,s.Lk)("h3",null,(0,x.v_)(o.selectedRecipe.label),1),o.selectedRecipe.image?((0,s.uX)(),(0,s.CE)("div",ci,[(0,s.Lk)("img",{src:o.selectedRecipe.image,alt:o.selectedRecipe.label,style:{width:"300px",height:"300px","object-fit":"cover","border-radius":"8px",margin:"15px 0"}},null,8,di)])):(0,s.Q3)("",!0),(0,s.Lk)("div",ui,[(0,s.Lk)("div",pi,[t[18]||(t[18]=(0,s.Lk)("h4",null,"Nutrition:",-1)),(0,s.Lk)("p",null,[t[13]||(t[13]=(0,s.Lk)("strong",null,"Calories:",-1)),(0,s.eW)(" "+(0,x.v_)(o.selectedRecipe.calories?Math.round(o.selectedRecipe.calories):"N/A"),1)]),(0,s.Lk)("p",null,[t[14]||(t[14]=(0,s.Lk)("strong",null,"Servings:",-1)),(0,s.eW)(" "+(0,x.v_)(o.selectedRecipe.yield||"N/A"),1)]),t[19]||(t[19]=(0,s.Lk)("h5",null,"Nutrients per serving:",-1)),(0,s.Lk)("ul",hi,[n.getNutrientValue("PROCNT")?((0,s.uX)(),(0,s.CE)("li",mi,[t[15]||(t[15]=(0,s.Lk)("i",{class:"fas fa-drumstick-bite"},null,-1)),(0,s.eW)(" Protein: "+(0,x.v_)(n.getNutrientValue("PROCNT"))+"g ",1)])):(0,s.Q3)("",!0),n.getNutrientValue("FAT")?((0,s.uX)(),(0,s.CE)("li",gi,[t[16]||(t[16]=(0,s.Lk)("i",{class:"fas fa-oil-can"},null,-1)),(0,s.eW)(" Fat: "+(0,x.v_)(n.getNutrientValue("FAT"))+"g ",1)])):(0,s.Q3)("",!0),n.getNutrientValue("CHOCDF")?((0,s.uX)(),(0,s.CE)("li",yi,[t[17]||(t[17]=(0,s.Lk)("i",{class:"fas fa-bread-slice"},null,-1)),(0,s.eW)(" Carbs: "+(0,x.v_)(n.getNutrientValue("CHOCDF"))+"g ",1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ki,[t[20]||(t[20]=(0,s.Lk)("h4",null,"Ingredients:",-1)),(0,s.Lk)("div",_i,[(0,s.Lk)("ul",fi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedRecipe.ingredientLines,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"recipe-preview-modal__list-item"},(0,x.v_)(e),1)))),128))])])])])])])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)}var bi={name:"AddRecipeModal",props:{show:{type:Boolean,required:!0},selectedDay:{type:[Number,null],required:!0},monthYear:{type:String,required:!0},mealType:{type:String,required:!0}},data(){return{query:"",recipes:[],hasSearched:!1,availableIngredients:[],selectedIngredients:[],dietaryPreferences:"",selectedRecipe:null,favoriteRecipes:[],APP_ID:"fcbb645c",APP_KEY:"475ad8f07b669d07d1b4e5a021a100cc",BASE_URL:"https://api.edamam.com/api/recipes/v2",showFavorites:!1}},computed:{validIngredients(){const e=new Date;return this.availableIngredients.filter((t=>{if(!t.expiryDate)return!0;const i=new Date(t.expiryDate);return i>=e}))}},watch:{show:{immediate:!0,handler(e){e?(this.fetchFridgeIngredients(),this.fetchDietaryPreferences(),this.fetchFavoriteRecipes()):this.selectedRecipe=null}}},methods:{getNutrientValue(e){return this.selectedRecipe?.totalNutrients?.[e]?.quantity&&this.selectedRecipe?.yield&&0!==this.selectedRecipe.yield?Math.round(this.selectedRecipe.totalNutrients[e].quantity/this.selectedRecipe.yield):"N/A"},toggleFavorites(){this.showFavorites=!this.showFavorites},selectRecipe(e){this.selectedRecipe=e},selectFavoriteRecipe(e){const t={...e,totalNutrients:e.totalNutrients||{},yield:e.yield||1,calories:e.calories||0};this.selectedRecipe=t},closePreview(){this.selectedRecipe=null},isExpiringSoon(e){if(!e.expiryDate)return!1;const t=new Date(e.expiryDate),i=new Date,a=Math.ceil((t-i)/864e5);return a<=3&&a>=0},async searchRecipes(){if(!this.query)return;let e=`${this.BASE_URL}?type=public&q=${this.query}&app_id=${this.APP_ID}&app_key=${this.APP_KEY}`;this.dietaryPreferences&&this.dietaryPreferences.forEach((t=>{e+=`&health=${t.toLowerCase()}`}));try{const t=await fetch(e),i=await t.json();this.recipes=i.hits,this.hasSearched=!0,this.selectedRecipe=null}catch(t){console.error("Error fetching recipes:",t)}},async fetchFridgeIngredients(){const e=(0,p.xI)(),t=e.currentUser;if(t)try{const e=await(0,f.GG)((0,f.rJ)(w,`users/${t.uid}/items`));this.availableIngredients=e.docs.map((e=>({id:e.id,...e.data()}))),console.log("Fetched ingredients:",this.availableIngredients)}catch(i){console.error("Error fetching available ingredients:",i)}else console.error("User is not authenticated")},async fetchDietaryPreferences(){const e=(0,p.xI)(),t=e.currentUser;if(t)try{const e=await(0,f.x7)((0,f.H9)(w,"users",t.uid));if(e.exists()){const t=e.data();this.dietaryPreferences=t.dietaryPreferences||[],console.log("Fetched dietary preferences:",this.dietaryPreferences)}}catch(i){console.error("Error fetching dietary preferences:",i)}else console.error("User is not authenticated")},async fetchFavoriteRecipes(){const e=(0,p.xI)(),t=e.currentUser;if(t)try{const e=(0,f.rJ)(w,`users/${t.uid}/favorites`),i=await(0,f.GG)(e);this.favoriteRecipes=i.docs.map((e=>({id:e.id,...e.data()}))),console.log("Fetched favorite recipes:",this.favoriteRecipes)}catch(i){console.error("Error fetching favorite recipes:",i)}else console.error("User is not authenticated")},useAvailableIngredients(){this.selectedIngredients.length>0&&(this.query=this.selectedIngredients.join(", "),this.searchRecipes())},addRecipe(e){console.log("Original recipe data:",e),console.log("Original totalNutrients:",e.totalNutrients);const t={...e,mealType:this.mealType.toLowerCase(),calories:e.calories||0,yield:e.yield||1,totalNutrients:{PROCNT:e.totalNutrients?.PROCNT||{quantity:0,unit:"g"},FAT:e.totalNutrients?.FAT||{quantity:0,unit:"g"},CHOCDF:e.totalNutrients?.CHOCDF||{quantity:0,unit:"g"},...e.totalNutrients||{}}};this.$emit("add-recipe",t),this.selectedRecipe=null},close(){this.$emit("close"),this.query="",this.recipes=[],this.availableIngredients=[],this.selectedIngredients=[],this.hasSearched=!1,this.selectedRecipe=null}}};const Li=(0,m.A)(bi,[["render",vi]]);var Ci=Li;const wi={key:0,class:"recipe-modal"},Ii={class:"recipe-modal__card"},Ei={class:"recipe-modal__body"},Di={class:"recipe-modal__header"},xi={class:"recipe-modal__info"},Ri={key:0,class:"recipe-modal__image"},Pi=["src","alt"],Fi={class:"recipe-modal__details"},Ai={class:"recipe-modal__nutrition"},Si={class:"recipe-modal__nutrition-list"},Ui={key:0},Xi={key:1},Ni={key:2},Mi={class:"recipe-modal__ingredients"},Ti={class:"recipe-modal__list"},$i={class:"recipe-modal__ingredients-list"},Hi={class:"recipe-modal__actions"};function Vi(e,t,i,a,r,o){return i.recipe?((0,s.uX)(),(0,s.CE)("div",wi,[(0,s.Lk)("div",Ii,[(0,s.Lk)("div",Ei,[(0,s.Lk)("div",Di,[t[4]||(t[4]=(0,s.Lk)("h5",{class:"recipe-modal__title"},"Recipe Details 🥗🍳",-1)),(0,s.Lk)("button",{class:"recipe-modal__close-btn",onClick:t[0]||(t[0]=(...e)=>o.close&&o.close(...e))},"X")]),t[13]||(t[13]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",xi,[(0,s.Lk)("h3",null,(0,x.v_)(i.recipe.label),1),i.recipe.image?((0,s.uX)(),(0,s.CE)("div",Ri,[(0,s.Lk)("img",{src:i.recipe.image,alt:i.recipe.label,style:{width:"300px",height:"300px","object-fit":"cover","border-radius":"8px",margin:"15px 0"}},null,8,Pi)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Fi,[(0,s.Lk)("div",Ai,[t[10]||(t[10]=(0,s.Lk)("h4",null,"Nutrition:",-1)),(0,s.Lk)("p",null,[t[5]||(t[5]=(0,s.Lk)("strong",null,"Calories:",-1)),(0,s.eW)(" "+(0,x.v_)(i.recipe.calories?Math.round(i.recipe.calories):"N/A"),1)]),(0,s.Lk)("p",null,[t[6]||(t[6]=(0,s.Lk)("strong",null,"Servings:",-1)),(0,s.eW)(" "+(0,x.v_)(i.recipe.yield||"N/A"),1)]),t[11]||(t[11]=(0,s.Lk)("h5",null,"Nutrients per serving:",-1)),(0,s.Lk)("ul",Si,[o.getNutrientValue("PROCNT")?((0,s.uX)(),(0,s.CE)("li",Ui,[t[7]||(t[7]=(0,s.Lk)("i",{class:"fas fa-drumstick-bite"},null,-1)),(0,s.eW)(" Protein: "+(0,x.v_)(o.getNutrientValue("PROCNT"))+"g ",1)])):(0,s.Q3)("",!0),o.getNutrientValue("FAT")?((0,s.uX)(),(0,s.CE)("li",Xi,[t[8]||(t[8]=(0,s.Lk)("i",{class:"fas fa-oil-can"},null,-1)),(0,s.eW)(" Fat: "+(0,x.v_)(o.getNutrientValue("FAT"))+"g ",1)])):(0,s.Q3)("",!0),o.getNutrientValue("CHOCDF")?((0,s.uX)(),(0,s.CE)("li",Ni,[t[9]||(t[9]=(0,s.Lk)("i",{class:"fas fa-bread-slice"},null,-1)),(0,s.eW)(" Carbs: "+(0,x.v_)(o.getNutrientValue("CHOCDF"))+"g ",1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Mi,[t[12]||(t[12]=(0,s.Lk)("h4",null,"Ingredients:",-1)),(0,s.Lk)("div",Ti,[(0,s.Lk)("ul",$i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.recipe.ingredientLines,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"recipe-modal__list-item"},(0,x.v_)(e),1)))),128))])])])]),(0,s.Lk)("div",Hi,[(0,s.Lk)("button",{class:"recipe-modal__btn recipe-modal__btn--shopping",onClick:t[1]||(t[1]=(...e)=>o.addIngredients&&o.addIngredients(...e))}," Add to Shopping List "),(0,s.Lk)("button",{class:"recipe-modal__btn recipe-modal__btn--completed",onClick:t[2]||(t[2]=(...e)=>o.goToCookingInstructions&&o.goToCookingInstructions(...e))}," Cooking Instructions "),(0,s.Lk)("button",{class:"recipe-modal__btn recipe-modal__btn--delete",onClick:t[3]||(t[3]=(...e)=>o.deleteRecipe&&o.deleteRecipe(...e))}," Delete Recipe ")])])])])])):(0,s.Q3)("",!0)}var Wi={props:{recipe:{type:Object,required:!0},day:{type:Number,required:!0},monthYear:{type:String,required:!0},selectedRecipeIndex:{type:Number,required:!0}},methods:{getNutrientValue(e){return this.recipe?.totalNutrients?.[e]?.quantity&&this.recipe?.yield&&0!==this.recipe.yield?Math.round(this.recipe.totalNutrients[e].quantity/this.recipe.yield):"N/A"},close(){this.$emit("close")},deleteRecipe(){this.$emit("delete-recipe",this.recipe,this.selectedRecipeIndex)},addIngredients(){this.$emit("add-to-shopping-list"),alert("Ingredients added to the shopping list!")},goToCookingInstructions(){const e=encodeURIComponent(this.recipe.uri);this.$router.push({name:"RecipeDetails",params:{id:e}}),this.close()}}};const qi=(0,m.A)(Wi,[["render",Vi]]);var Qi=qi;const Oi={class:"shopping-list"},Ji={class:"shopping-list__input-group"},Gi={key:0,class:"mb-3"},Bi={class:"shopping-list__ingredients"},Ki=["onKeyup"],ji={class:"shopping-list__button-group"},Yi=["onClick"],zi={class:"shopping-list__button-group"},Zi=["onClick"],ea=["onClick"],ta={key:1,class:"shopping-list__modal"},ia={class:"shopping-list__modal-content"},aa={class:"shopping-list__modal-buttons"};function sa(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",Oi,[t[11]||(t[11]=(0,s.Lk)("h4",{class:"shopping-list__title"},"Shopping List",-1)),(0,s.Lk)("div",Ji,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newIngredient=e),placeholder:"Add an ingredient",class:"shopping-list__input",onKeyup:t[1]||(t[1]=(0,a.jR)(((...e)=>n.addIngredient&&n.addIngredient(...e)),["enter"]))},null,544),[[a.Jo,o.newIngredient]]),(0,s.Lk)("button",{class:"shopping-list__button",onClick:t[2]||(t[2]=(...e)=>n.addIngredient&&n.addIngredient(...e))},"Add")]),o.localIngredients.length>0?((0,s.uX)(),(0,s.CE)("div",Gi,[(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--clear",onClick:t[3]||(t[3]=e=>o.showClearConfirmation=!0)}," Clear All ")])):(0,s.Q3)("",!0),(0,s.Lk)("ul",Bi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.localIngredients,((e,i)=>((0,s.uX)(),(0,s.CE)("li",{key:i,class:"shopping-list__item"},[o.editIndex===i?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedIngredient=e),class:"shopping-list__input shopping-list__input--edit",onKeyup:[(0,a.jR)((e=>n.saveEdit(i)),["enter"]),t[5]||(t[5]=(0,a.jR)(((...e)=>n.cancelEdit&&n.cancelEdit(...e)),["esc"]))],ref_for:!0,ref:`editInput_${i}`},null,40,Ki),[[a.Jo,o.editedIngredient]]),(0,s.Lk)("div",ji,[(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--save",onClick:e=>n.saveEdit(i)}," Save ",8,Yi),(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--cancel",onClick:t[6]||(t[6]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))}," Cancel ")])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,x.v_)(e)+" ",1),(0,s.Lk)("div",zi,[(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--edit",onClick:t=>n.startEdit(i,e)}," Edit ",8,Zi),(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--remove",onClick:e=>n.removeIngredient(i)}," Remove ",8,ea)])],64))])))),128))]),o.showClearConfirmation?((0,s.uX)(),(0,s.CE)("div",ta,[(0,s.Lk)("div",ia,[t[9]||(t[9]=(0,s.Lk)("h5",{class:"shopping-list__modal-title"},"Confirm Clear All",-1)),t[10]||(t[10]=(0,s.Lk)("p",{class:"shopping-list__modal-text"},"Are you sure you want to clear all items from your shopping list?",-1)),(0,s.Lk)("div",aa,[(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--confirm",onClick:t[7]||(t[7]=(...e)=>n.confirmClear&&n.confirmClear(...e))}," Yes, Clear All "),(0,s.Lk)("button",{class:"shopping-list__button shopping-list__button--cancel",onClick:t[8]||(t[8]=e=>o.showClearConfirmation=!1)}," Cancel ")])])])):(0,s.Q3)("",!0)])}var ra={name:"ShoppingList",props:{ingredients:{type:Array,default:()=>[]}},data(){return{localIngredients:[],newIngredient:"",editIndex:-1,editedIngredient:"",showClearConfirmation:!1}},watch:{ingredients:{immediate:!0,deep:!0,handler(e){JSON.stringify(this.localIngredients)!==JSON.stringify(e)&&(this.localIngredients=[...e])}}},methods:{addIngredient(){if(this.newIngredient.trim()){const e=this.newIngredient.trim();this.localIngredients.includes(e)||(this.localIngredients.push(e),this.newIngredient="",this.$emit("update",[...this.localIngredients]))}},removeIngredient(e){this.localIngredients.splice(e,1),this.$emit("update",[...this.localIngredients])},startEdit(e,t){this.editIndex=e,this.editedIngredient=t,this.$nextTick((()=>{const t=this.$refs[`editInput_${e}`];t&&t[0]&&t[0].focus()}))},saveEdit(e){this.editedIngredient.trim()&&(this.localIngredients[e]=this.editedIngredient.trim(),this.$emit("update",[...this.localIngredients])),this.cancelEdit()},cancelEdit(){this.editIndex=-1,this.editedIngredient=""},confirmClear(){this.localIngredients=[],this.$emit("update",[]),this.showClearConfirmation=!1}}};const oa=(0,m.A)(ra,[["render",sa]]);var na=oa;const la={key:0,class:"day-plan-popup"},ca={class:"day-plan-popup__content"},da={class:"day-plan-popup__header"},ua={class:"day-plan-popup__control-buttons"},pa={class:"day-plan-popup__meal-sections"},ha={class:"day-plan-popup__meal-section"},ma={class:"day-plan-popup__meal-header"},ga={class:"day-plan-popup__all-recipes-section"},ya={class:"day-plan-popup__meal-type-header"},ka={class:"day-plan-popup__meal-type-items"},_a=["onClick"],fa=["onClick"],va={key:0,class:"day-plan-popup__no-recipes-message"};function ba(e,t,i,r,o,n){return i.show?((0,s.uX)(),(0,s.CE)("div",la,[(0,s.Lk)("div",ca,[(0,s.Lk)("div",da,[(0,s.Lk)("h2",null,(0,x.v_)(i.selectedDay),1),(0,s.Lk)("button",{class:"day-plan-popup__close-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"×")]),(0,s.Lk)("div",ua,[n.hasMeals?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"day-plan-popup__clear-day-button",onClick:t[1]||(t[1]=t=>e.$emit("clear-day"))}," Clear Day ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",pa,[(0,s.Lk)("div",ha,[(0,s.Lk)("div",ma,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedMealType=e),class:"day-plan-popup__meal-type-dropdown"},t[4]||(t[4]=[(0,s.Fv)('<option value="breakfast">Breakfast</option><option value="lunch">Lunch</option><option value="dinner">Dinner</option><option value="brunch">Brunch</option><option value="snack">Snack</option><option value="tea-time">Tea Time</option>',6)]),512),[[a.u1,o.selectedMealType]]),(0,s.Lk)("button",{class:"day-plan-popup__add-recipe-button",onClick:t[3]||(t[3]=t=>e.$emit("add-recipe",o.selectedMealType))}," Add Recipe ")])]),(0,s.Lk)("div",ga,[t[5]||(t[5]=(0,s.Lk)("h3",{class:"day-plan-popup__all-recipes-title"},"Recipes for the Day",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.groupedMeals,((t,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"day-plan-popup__meal-type-group"},[(0,s.Lk)("div",ya,[(0,s.Lk)("h4",null,(0,x.v_)(n.formatMealType(i)),1)]),(0,s.Lk)("div",ka,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t,((t,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"day-plan-popup__meal-item",onClick:a=>e.$emit("show-recipe-details",t,i)},[(0,s.Lk)("span",null,(0,x.v_)(t.label),1),(0,s.Lk)("button",{class:"day-plan-popup__delete-meal-button",onClick:(0,a.D$)((a=>e.$emit("delete-recipe",t,i)),["stop"])}," × ",8,fa)],8,_a)))),128))])])))),128)),0===i.meals.length?((0,s.uX)(),(0,s.CE)("p",va," No recipes added for today ")):(0,s.Q3)("",!0)])])])])):(0,s.Q3)("",!0)}var La={name:"DayPlanPopup",props:{show:{type:Boolean,required:!0},selectedDay:{type:String,required:!0},meals:{type:Array,default:()=>[]}},data(){return{selectedMealType:"breakfast"}},computed:{groupedMeals(){return this.meals.reduce(((e,t)=>(e[t.mealType]||(e[t.mealType]=[]),e[t.mealType].push(t),e)),{})},hasMeals(){return this.meals.length>0}},methods:{formatMealType(e){return e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}}};const Ca=(0,m.A)(La,[["render",ba]]);var wa=Ca;const Ia={class:"tracker__card"},Ea={class:"tracker__stats"},Da={class:"tracker__count"},xa={key:0,class:"tracker__top-recipes"},Ra={class:"tracker__top-recipes-list"},Pa={class:"tracker__list"},Fa={class:"tracker__filter"},Aa={class:"tracker__date-range"},Sa={class:"tracker__date-field"},Ua=["max"],Xa={class:"tracker__date-field"},Na=["min","max"],Ma=["disabled"],Ta={class:"tracker__list-container"};function $a(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",{class:(0,x.C4)(["tracker",{"tracker--collapsed":o.isCollapsed}])},[(0,s.Lk)("div",Ia,[t[7]||(t[7]=(0,s.Lk)("h4",{class:"tracker__title"},"Recipe Tracker",-1)),(0,s.Lk)("div",Ea,[(0,s.Lk)("p",Da,"Total Recipes Cooked: "+(0,x.v_)(o.completedRecipes.length),1),n.topRecipes.length?((0,s.uX)(),(0,s.CE)("div",xa,[t[3]||(t[3]=(0,s.Lk)("p",{class:"tracker__top-recipes-title"},"Most Cooked:",-1)),(0,s.Lk)("div",Ra,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.topRecipes,((e,t)=>((0,s.uX)(),(0,s.CE)("p",{key:t,class:"tracker__top-recipe"},(0,x.v_)(e.label)+" ("+(0,x.v_)(e.count)+" times) ",1)))),128))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Pa,[t[6]||(t[6]=(0,s.Lk)("div",{class:"tracker__header"},[(0,s.Lk)("h4",{class:"tracker__subtitle"},"Completed Recipes:")],-1)),(0,s.Lk)("div",Fa,[(0,s.Lk)("div",Aa,[(0,s.Lk)("div",Sa,[t[4]||(t[4]=(0,s.Lk)("label",null,"From:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>o.dateRange.start=e),max:o.dateRange.end||n.today,class:"tracker__date-input"},null,8,Ua),[[a.Jo,o.dateRange.start]])]),(0,s.Lk)("div",Xa,[t[5]||(t[5]=(0,s.Lk)("label",null,"To:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>o.dateRange.end=e),min:o.dateRange.start,max:n.today,class:"tracker__date-input"},null,8,Na),[[a.Jo,o.dateRange.end]])]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.clearDateRange&&n.clearDateRange(...e)),class:"tracker__clear-btn",disabled:!o.dateRange.start&&!o.dateRange.end}," Clear ",8,Ma)])]),(0,s.Lk)("ul",Ta,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredRecipes,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:"tracker__item"},(0,x.v_)(e.label)+" - "+(0,x.v_)(e.completionDate),1)))),128))])])])],2)}var Ha={name:"RecipeTracker",emits:["recipes-loaded"],data(){return{completedRecipes:[],currentUserId:null,dateRange:{start:null,end:null},isCollapsed:!1,screenWidth:window.innerWidth}},created(){this.initializeTracker(),window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},computed:{today(){return(new Date).toISOString().split("T")[0]},filteredRecipes(){return this.dateRange.start||this.dateRange.end?this.completedRecipes.filter((e=>{const[t,i,a]=e.completionDate.split("/"),s=new Date(a,t-1,i);s.setHours(0,0,0,0);let r=null;this.dateRange.start&&(r=new Date(this.dateRange.start),r.setHours(0,0,0,0));let o=null;return this.dateRange.end&&(o=new Date(this.dateRange.end),o.setHours(23,59,59,999)),r&&o?s>=r&&s<=o:r?s>=r:!o||s<=o})):this.completedRecipes},topRecipes(){const e=this.completedRecipes.reduce(((e,t)=>(e[t.label]=(e[t.label]||0)+1,e)),{}),t=Object.entries(e).map((([e,t])=>({label:e,count:t}))).sort(((e,t)=>t.count-e.count));if(0===t.length)return[];const i=t[0].count;return t.filter((e=>e.count===i))}},methods:{clearDateRange(){this.dateRange.start=null,this.dateRange.end=null},handleResize(){this.screenWidth=window.innerWidth,this.isCollapsed=this.screenWidth<=768},async initializeTracker(){const e=(0,p.xI)();this.currentUserId=e.currentUser?.uid,this.currentUserId&&await this.loadCompletedRecipes(),this.handleResize()},async loadCompletedRecipes(){try{const e=(0,f.rJ)(w,`users/${this.currentUserId}/completedRecipes`),t=await(0,f.GG)(e);this.completedRecipes=t.docs.map((e=>({id:e.id,...e.data()}))),this.$emit("recipes-loaded")}catch(e){console.error("Error loading completed recipes:",e)}},async addCompletedRecipe(e){if(this.currentUserId)try{const t=(new Date).toLocaleDateString(),i=this.completedRecipes.find((i=>i.label===e.label&&i.completionDate===t));if(i)console.log("Recipe already marked as completed today");else{const i={label:e.label,completionDate:t,recipeId:e.id||null,userId:this.currentUserId},a=(0,f.rJ)(w,`users/${this.currentUserId}/completedRecipes`),s=await(0,f.gS)(a,i);this.completedRecipes.push({id:s.id,...i}),this.$emit("recipes-loaded"),console.log("Recipe successfully added to completed recipes")}}catch(t){console.error("Error adding completed recipe:",t)}}}};const Va=(0,m.A)(Ha,[["render",$a],["__scopeId","data-v-f037251c"]]);var Wa=Va,qa={components:{AddRecipeModal:Ci,RecipeDetailsModal:Qi,ShoppingList:na,DayPlanPopup:wa,RecipeTracker:Wa},data(){return{currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),selectedDay:null,showRecipeModal:!1,showRecipeDetails:!1,showDayPlanPopup:!1,selectedRecipe:null,selectedRecipeIndex:null,mealPlan:{},weekDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shoppingList:[],currentUserId:null,availableIngredients:[],mealType:"",clickedDay:null,lastCleanupDate:null}},computed:{formattedMonthYear(){return new Date(this.currentYear,this.currentMonth).toLocaleDateString("en-US",{month:"long",year:"numeric"})},selectedDayText(){if(!this.selectedDay)return"";const e=new Date(this.currentYear,this.currentMonth,this.selectedDay);return e.toLocaleDateString("en-US",{weekday:"long"})+" "+this.selectedDay},selectedDayMeals(){return this.mealPlan[this.selectedDay]||[]},calendar(){const e=new Date(this.currentYear,this.currentMonth,1).getDay(),t=new Date(this.currentYear,this.currentMonth+1,0).getDate(),i=[];let a=new Array(7).fill(null);for(let s=1;s<=t;s++){const r=(e+s-1)%7;a[r]=s,6!==r&&s!==t||(i.push(a),a=new Array(7).fill(null))}return i}},watch:{currentMonth:{handler:function(){this.loadMealPlan()}}},methods:{handleShowRecipeDetails(e,t){this.selectedRecipe=e,this.selectedRecipeIndex=t,this.showRecipeDetails=!0,this.showDayPlanPopup=!1},async handleRecipeCompleted(e){try{if(this.$refs.recipeTracker&&this.$refs.recipeTracker.addCompletedRecipe(e),e.id&&this.currentUserId){const t=(0,f.H9)(w,`users/${this.currentUserId}/mealPlans`,e.id);await(0,f.mZ)(t,{completed:!0}),await this.loadMealPlan()}}catch(t){console.error("Error marking recipe as completed:",t)}},isToday(e){const t=new Date;return e===t.getDate()&&this.currentMonth===t.getMonth()&&this.currentYear===t.getFullYear()},async loadMealPlan(){if(this.currentUserId)try{console.log("Loading meal plan for month:",this.currentMonth);const e=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/mealPlans`));this.mealPlan={},e.forEach((e=>{const t={id:e.id,...e.data()};if(t.day&&t.month===this.currentMonth&&t.year===this.currentYear){const i=new Date(t.year,t.month,t.day),a=new Date;a.setHours(0,0,0,0),(i>=a||t.completed)&&(this.mealPlan[t.day]||(this.mealPlan[t.day]=[]),this.mealPlan[t.day].push({...t.recipe,id:e.id,day:t.day,month:t.month,year:t.year,mealType:t.mealType,createdAt:t.createdAt,completed:t.completed||!1}))}})),console.log("Meal plan loaded:",this.mealPlan)}catch(e){console.error("Error loading meal plan:",e)}},async loadShoppingList(){if(this.currentUserId)try{const e=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/shoppingList`));this.shoppingList=[],e.forEach((e=>{const t={id:e.id,...e.data()};this.shoppingList.push(t.item)})),console.log("Shopping list loaded:",this.shoppingList)}catch(e){console.error("Error loading shopping list:",e)}},async addRecipeToDay(e){if(this.currentUserId){try{const t=await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/mealPlans`),{day:this.selectedDay,recipe:e,month:this.currentMonth,year:this.currentYear,mealType:this.mealType,createdAt:(new Date).toISOString()});this.mealPlan[this.selectedDay]||(this.mealPlan[this.selectedDay]=[]),this.mealPlan[this.selectedDay].push({...e,id:t.id,day:this.selectedDay,month:this.currentMonth,year:this.currentYear,mealType:this.mealType,createdAt:(new Date).toISOString()})}catch(t){console.error("Error adding recipe:",t)}this.closeRecipeModal()}},async deleteRecipe(e,t){if(this.currentUserId&&this.mealPlan[this.selectedDay])try{e.id&&(console.log("Deleting recipe with ID:",e.id),await(0,f.kd)((0,f.H9)(w,`users/${this.currentUserId}/mealPlans`,e.id))),console.log("Removing recipe from local meal plan."),this.mealPlan[this.selectedDay].splice(t,1),0===this.mealPlan[this.selectedDay].length&&delete this.mealPlan[this.selectedDay],console.log("Reloading meal plan..."),await this.loadMealPlan(),console.log("Meal plan reloaded successfully:",this.mealPlan)}catch(i){console.error("Error deleting recipe:",i)}finally{this.closeRecipeDetails()}},async addToShoppingList(){if(this.currentUserId&&this.selectedRecipe&&this.selectedRecipe.ingredientLines){try{for(const e of this.selectedRecipe.ingredientLines)this.shoppingList.includes(e)||(await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/shoppingList`),{item:e,createdAt:(new Date).toISOString()}),this.shoppingList.push(e))}catch(e){console.error("Error adding to shopping list:",e)}this.closeRecipeDetails()}},async updateShoppingList(e){if(this.currentUserId)try{const t=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/shoppingList`));for(const e of t.docs)await(0,f.kd)(e.ref);for(const i of e)await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/shoppingList`),{item:i,createdAt:(new Date).toISOString()});this.shoppingList=e}catch(t){console.error("Error updating shopping list:",t)}},async clearDayMeals(){if(this.currentUserId&&this.selectedDay&&this.mealPlan[this.selectedDay]){try{const e=this.mealPlan[this.selectedDay];for(const t of e)t.id&&await(0,f.kd)((0,f.H9)(w,`users/${this.currentUserId}/mealPlans`,t.id));delete this.mealPlan[this.selectedDay]}catch(e){console.error("Error clearing day meals:",e)}this.closeDayPlanPopup()}},async fetchAvailableIngredients(){if(this.currentUserId)try{const e=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/fridge`)),t=e.docs.map((e=>e.data().item));this.$refs.addRecipeModal.availableIngredients=t}catch(e){console.error("Error fetching available ingredients:",e)}},isPastDate(e){if(!e)return!1;const t=new Date,i=new Date(this.currentYear,this.currentMonth,e);return i<new Date(t.setHours(0,0,0,0))},handleDayClick(e){e&&!this.isPastDate(e)&&this.selectDay(e)},async cleanupPastRecipes(){if(!this.currentUserId)return;const e=new Date;e.setHours(0,0,0,0);try{const t=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/mealPlans`));for(const i of t.docs){const t=i.data(),a=new Date(t.year,t.month,t.day);a<e&&!t.completed&&await(0,f.kd)(i.ref)}this.lastCleanupDate=e,await this.loadMealPlan()}catch(t){console.error("Error cleaning up past recipes:",t)}},selectDay(e){e&&(this.selectedDay=e,this.clickedDay=e,this.showDayPlanPopup=!0)},handleAddRecipe(e){this.mealType=e,this.showRecipeModal=!0,this.showDayPlanPopup=!1},closeRecipeModal(){this.showRecipeModal=!1,this.showDayPlanPopup=!0},openRecipeDetails(e,t,i){this.selectedRecipe=e,this.selectedRecipeIndex=i,this.selectedDay=t,this.showRecipeDetails=!0},closeRecipeDetails(){this.showRecipeDetails=!1,this.selectedRecipe=null,this.selectedRecipeIndex=null},closeDayPlanPopup(){this.showDayPlanPopup=!1},prevMonth(){0===this.currentMonth?(this.currentYear-=1,this.currentMonth=11):this.currentMonth-=1},nextMonth(){11===this.currentMonth?(this.currentYear+=1,this.currentMonth=0):this.currentMonth+=1}},mounted(){(0,p.hg)(C,(async e=>{if(e){this.currentUserId=e.uid;try{await Promise.all([this.loadMealPlan(),this.loadShoppingList(),this.cleanupPastRecipes()]);const e=async()=>{const e=new Date;e.setHours(0,0,0,0),(!this.lastCleanupDate||this.lastCleanupDate<e)&&await this.cleanupPastRecipes()};this.cleanupInterval=setInterval(e,36e5)}catch(t){console.error("Error loading data:",t)}}else console.log("No user is signed in."),this.currentUserId=null,this.mealPlan={},this.shoppingList=[]}))},beforeUnmount(){this.cleanupInterval&&clearInterval(this.cleanupInterval)}};const Qa=(0,m.A)(qa,[["render",wt]]);var Oa=Qa,Ja=(0,s.pM)({name:"MealPlannerPage",components:{MealPlannerComponent:Oa}});const Ga=(0,m.A)(Ja,[["render",lt]]);var Ba=Ga;function Ka(e,t,i,a,r,o){const n=(0,s.g2)("Login");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n)])}const ja={class:"login"},Ya={class:"login__container"},za={class:"login__card"},Za={class:"login__form-group"},es={class:"login__form-group"},ts={class:"login__reset-text"},is={key:0,class:"login__alert login__alert--error"},as={class:"login__register"},ss={class:"login__register-text"};function rs(e,t,i,r,o,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",ja,[(0,s.Lk)("div",Ya,[(0,s.Lk)("div",za,[t[13]||(t[13]=(0,s.Lk)("h2",{class:"login__title"},"Welcome to HealthyChef!",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>n.loginWithEmail&&n.loginWithEmail(...e)),["prevent"])),class:"login__form"},[(0,s.Lk)("div",Za,[t[4]||(t[4]=(0,s.Lk)("label",{class:"login__label",for:"email"},"Email: ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),placeholder:"Email address",class:"login__input",required:"","aria-label":"Email"},null,512),[[a.Jo,o.email]])]),(0,s.Lk)("div",es,[t[8]||(t[8]=(0,s.Lk)("label",{class:"login__label",for:"password"},"Password: ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),placeholder:"Password",class:"login__input",required:"","aria-label":"Password"},null,512),[[a.Jo,o.password]]),(0,s.Lk)("p",ts,[t[6]||(t[6]=(0,s.eW)(" Forgot your password? ")),(0,s.bF)(l,{to:"/reset-password",class:"login__link"},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.eW)("Reset here")]))),_:1}),t[7]||(t[7]=(0,s.eW)(". "))])]),t[9]||(t[9]=(0,s.Lk)("button",{type:"submit",class:"login__button login__button--primary"}," Login ",-1))],32),o.errorMessage?((0,s.uX)(),(0,s.CE)("div",is,(0,x.v_)(o.errorMessage),1)):(0,s.Q3)("",!0),t[14]||(t[14]=(0,s.Lk)("div",null,"Or",-1)),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.loginWithGoogle&&n.loginWithGoogle(...e)),class:"login__button login__button--google"},t[10]||(t[10]=[(0,s.Lk)("i",{class:"fab fa-google"},null,-1),(0,s.eW)(" Login with Google ")])),(0,s.Lk)("div",as,[(0,s.Lk)("p",ss,[t[12]||(t[12]=(0,s.eW)(" Don't have an account? ")),(0,s.bF)(l,{to:"/register",class:"login__link"},{default:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.eW)("Register Here")]))),_:1})])])])])])}var os={data(){return{email:"",password:"",errorMessage:""}},methods:{async loginWithEmail(){try{await(0,p.x9)(C,this.email,this.password),this.$router.push("/")}catch(e){"auth/wrong-password"===e.code?this.errorMessage="Incorrect password. Please try again.":"auth/user-not-found"===e.code?this.errorMessage="No user found with this email address.":"auth/invalid-email"===e.code?this.errorMessage="Invalid email format. Please check your email.":this.errorMessage="Login failed. Have you registered an account?",console.error(e)}},async loginWithGoogle(){try{const e=await(0,p.df)(C,I),t=e.user,i=await(0,f.x7)((0,f.H9)(w,"users",t.uid));i.exists()||(await(0,f.BN)((0,f.H9)(w,"users",t.uid),{displayName:t.displayName,email:t.email,photoURL:t.photoURL,uid:t.uid,dietaryPreferences:[],notifications:!1,createdAt:new Date,updatedAt:new Date}),console.log("User profile saved to Firestore")),this.$router.push("/")}catch(e){console.error("Google Sign-In error",e)}}}};const ns=(0,m.A)(os,[["render",rs]]);var ls=ns,cs={components:{Login:ls}};const ds=(0,m.A)(cs,[["render",Ka]]);var us=ds;function ps(e,t,i,a,r,o){const n=(0,s.g2)("Register");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n)])}const hs={class:"register d-flex justify-content-center align-items-center min-vh-100 bg-light"},ms={class:"register__card card p-4 shadow-sm"},gs={class:"register__form-group mb-3"},ys={class:"register__form-group mb-3"},ks={class:"register__form-group mb-3"},_s=["type"],fs={key:0,class:"register__error alert alert-danger mt-2"},vs={class:"register__form-group mb-3"},bs=["type"],Ls={key:0,class:"register__error alert alert-danger mt-2"},Cs={class:"register__form-group form-check mb-3"},ws=["disabled"];function Is(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",hs,[(0,s.Lk)("div",ms,[t[12]||(t[12]=(0,s.Lk)("h2",{class:"register__title text-center mb-4"},"Register",-1)),(0,s.Lk)("form",{class:"register__form",onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},[(0,s.Lk)("div",gs,[t[7]||(t[7]=(0,s.Lk)("label",{for:"email",class:"register__label form-label"},"Email:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.email=e),class:"register__input form-control",placeholder:"Email",required:"","aria-label":"Email"},null,512),[[a.Jo,o.formData.email]])]),(0,s.Lk)("div",ys,[t[8]||(t[8]=(0,s.Lk)("label",{for:"displayName",class:"register__label form-label"},"Display Name:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"displayName",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.displayName=e),class:"register__input form-control",placeholder:"Display Name","aria-label":"Display Name"},null,512),[[a.Jo,o.formData.displayName]])]),(0,s.Lk)("div",ks,[t[9]||(t[9]=(0,s.Lk)("label",{for:"password",class:"register__label form-label"},"Password:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"password",type:o.passwordVisible?"text":"password","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.password=e),class:"register__input form-control",placeholder:"Password",required:"","aria-label":"Password"},null,8,_s),[[a.hp,o.formData.password]]),n.passwordLengthError?((0,s.uX)(),(0,s.CE)("div",fs," Password must be between 6 and 4096 characters. ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",vs,[t[10]||(t[10]=(0,s.Lk)("label",{for:"confirmPassword",class:"register__label form-label"},"Confirm Password:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"confirmPassword",type:o.passwordVisible?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.confirmPassword=e),class:"register__input form-control",placeholder:"Confirm Password",required:"","aria-label":"Confirm Password"},null,8,bs),[[a.hp,o.formData.confirmPassword]]),n.passwordMatchError?((0,s.uX)(),(0,s.CE)("div",Ls," Passwords do not match. ")):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"button",class:"register__toggle-btn btn btn-success w-100",onClick:t[4]||(t[4]=e=>o.passwordVisible=!o.passwordVisible)},(0,x.v_)(o.passwordVisible?"Hide Passwords":"Show Passwords"),1),(0,s.Lk)("div",Cs,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"notifications","onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.notifications=e),class:"register__checkbox form-check-input"},null,512),[[a.lH,o.formData.notifications]]),t[11]||(t[11]=(0,s.Lk)("label",{for:"notifications",class:"register__checkbox-label form-check-label"}," I would like to receive notifications. ",-1))])]),(0,s.Lk)("button",{type:"submit",class:"register__submit-btn btn btn-success w-100",disabled:n.passwordLengthError||n.passwordMatchError}," Register ",8,ws)],32),t[13]||(t[13]=(0,s.Lk)("p",{class:"register__login-link text-center mt-3"},[(0,s.eW)(" Already have an account? "),(0,s.Lk)("a",{href:"/login"},"Login")],-1))])])}var Es={name:"RegisterForm",data(){return{formData:{email:"",password:"",confirmPassword:"",displayName:"",notifications:!1},passwordVisible:!1}},computed:{passwordLengthError(){const{password:e}=this.formData;return e.length<6||e.length>4096},passwordMatchError(){const{password:e,confirmPassword:t}=this.formData;return e&&t&&e!==t}},methods:{async handleSubmit(){if(!this.passwordLengthError&&!this.passwordMatchError)try{const e=await(0,p.eJ)(C,this.formData.email,this.formData.password),t=e.user;await(0,f.BN)((0,f.H9)(w,"users",t.uid),{email:this.formData.email,dietaryPreferences:[],displayName:this.formData.displayName||"",notifications:this.formData.notifications,photoURL:t.photoURL||"",createdAt:(0,f.O5)(),updatedAt:(0,f.O5)()}),alert("Registration successful!"),this.$router.push("/profile")}catch(e){console.error("Error registering user:",e),alert("Failed to register. Please try again.")}}}};const Ds=(0,m.A)(Es,[["render",Is]]);var xs=Ds,Rs={components:{Register:xs}};const Ps=(0,m.A)(Rs,[["render",ps]]);var Fs=Ps;function As(e,t,i,a,r,o){const n=(0,s.g2)("ResetPasswordComponent");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n)])}const Ss={class:"reset-password"},Us={class:"reset-password__form-group"},Xs={key:0,class:"reset-password__alert reset-password__alert--success"},Ns={key:1,class:"reset-password__alert reset-password__alert--error"},Ms={class:"reset-password__register-text"};function Ts(e,t,i,r,o,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Ss,[t[5]||(t[5]=(0,s.Lk)("h2",{class:"reset-password__title"},"Reset Your Password",-1)),t[6]||(t[6]=(0,s.Lk)("p",{class:"reset-password__description"},"Enter your registered email address, and we'll send you a link to reset your password.",-1)),(0,s.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)(((...e)=>n.resetPassword&&n.resetPassword(...e)),["prevent"])),class:"reset-password__form"},[(0,s.Lk)("div",Us,[(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),class:"reset-password__input",placeholder:"Email",required:""},null,512),[[a.Jo,o.email]])]),t[2]||(t[2]=(0,s.Lk)("button",{type:"submit",class:"reset-password__button reset-password__button--primary"},"Send Reset Link",-1))],32),o.message?((0,s.uX)(),(0,s.CE)("div",Xs,(0,x.v_)(o.message),1)):(0,s.Q3)("",!0),o.error?((0,s.uX)(),(0,s.CE)("div",Ns,(0,x.v_)(o.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("p",Ms,[t[4]||(t[4]=(0,s.eW)(" Back to login page: ")),(0,s.bF)(l,{to:"/login",class:"reset-password__link"},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.eW)("Login Page")]))),_:1})])])}var $s={data(){return{email:"",message:"",error:""}},methods:{async resetPassword(){this.message="",this.error="";try{await(0,p.J1)(C,this.email),this.message="Password reset email sent! Please check your inbox."}catch(e){this.error="Error sending reset email. Please check the email entered or try again later.",console.error(e)}}}};const Hs=(0,m.A)($s,[["render",Ts]]);var Vs=Hs,Ws={components:{ResetPasswordComponent:Vs}};const qs=(0,m.A)(Ws,[["render",As]]);var Qs=qs;function Os(e,t,i,a,r,o){const n=(0,s.g2)("ProfileSettings");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n)])}const Js={class:"profile-container"},Gs={class:"profile-container__form-group"},Bs={class:"profile-container__form-group"},Ks={class:"profile-container__form-group"},js={class:"profile-container__dietary-preferences"},Ys={class:"profile-container__checkbox-inline"},zs={class:"profile-container__checkbox-inline"},Zs={class:"profile-container__checkbox-inline"},er={class:"profile-container__checkbox-inline"},tr={class:"profile-container__checkbox-inline"},ir={class:"profile-container__checkbox-inline"},ar={class:"profile-container__checkbox-inline"},sr={class:"profile-container__checkbox-inline"},rr={class:"profile-container__checkbox-inline"},or={class:"profile-container__checkbox-inline"},nr={class:"profile-container__checkbox-inline"},lr={class:"profile-container__checkbox-inline"},cr={class:"profile-container__checkbox-inline"},dr={class:"profile-container__checkbox-inline"},ur={class:"profile-container__checkbox-inline"},pr={class:"profile-container__checkbox-inline"},hr={class:"profile-container__checkbox-inline"},mr={class:"profile-container__checkbox-inline"},gr={class:"profile-container__checkbox-inline"},yr={class:"profile-container__checkbox-inline"},kr={class:"profile-container__checkbox-inline"},_r={class:"profile-container__checkbox-inline"},fr={class:"profile-container__checkbox-inline"},vr={class:"profile-container__checkbox-inline"},br={class:"profile-container__checkbox-inline"},Lr={class:"profile-container__checkbox-inline"},Cr={class:"profile-container__checkbox-inline"},wr={class:"profile-container__checkbox-inline"},Ir={class:"profile-container__checkbox-inline"},Er={class:"profile-container__checkbox-inline"},Dr={class:"profile-container__checkbox-inline"},xr={class:"profile-container__checkbox-inline"},Rr={class:"profile-container__checkbox-inline"},Pr={class:"profile-container__checkbox-inline"},Fr={class:"profile-container__checkbox-inline"},Ar={class:"profile-container__checkbox-inline"},Sr={class:"profile-container__checkbox-inline"},Ur={class:"profile-container__checkbox-inline"},Xr={class:"profile-container__checkbox-inline"},Nr={class:"profile-container__checkbox-inline"},Mr={class:"profile-container__checkbox-inline"},Tr={class:"profile-container__form-group"},$r={class:"profile-container__form-check"},Hr={key:0,class:"notification-form"},Vr={class:"profile-container__form-group"},Wr={key:0,class:"profile-container__alert alert-success mt-3"},qr={key:1,class:"profile-container__alert alert-danger mt-3"};function Qr(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",Js,[t[94]||(t[94]=(0,s.Lk)("h2",{class:"profile-container__header"},"Profile Settings",-1)),(0,s.Lk)("form",{onSubmit:t[45]||(t[45]=(0,a.D$)(((...e)=>n.updateProfile&&n.updateProfile(...e)),["prevent"]))},[(0,s.Lk)("div",Gs,[t[46]||(t[46]=(0,s.Lk)("label",{class:"profile-container__label"},"Email:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.user.email=e),class:"profile-container__input",readonly:""},null,512),[[a.Jo,o.user.email]])]),(0,s.Lk)("div",Bs,[t[47]||(t[47]=(0,s.Lk)("label",{class:"profile-container__label"},"Display Name:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.user.displayName=e),class:"profile-container__input",required:""},null,512),[[a.Jo,o.user.displayName]])]),(0,s.Lk)("div",Ks,[t[89]||(t[89]=(0,s.Lk)("label",{class:"profile-container__label"},"Dietary Preferences (You may select multiple):",-1)),(0,s.Lk)("div",js,[(0,s.Lk)("label",Ys,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"alcohol-free","onUpdate:modelValue":t[2]||(t[2]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[48]||(t[48]=(0,s.eW)(" Alcohol-Free "))]),(0,s.Lk)("label",zs,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"alcohol-cocktail","onUpdate:modelValue":t[3]||(t[3]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[49]||(t[49]=(0,s.eW)(" Alcohol-Cocktail "))]),(0,s.Lk)("label",Zs,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"celery-free","onUpdate:modelValue":t[4]||(t[4]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[50]||(t[50]=(0,s.eW)(" Celery-Free "))]),(0,s.Lk)("label",er,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"crustacean-free","onUpdate:modelValue":t[5]||(t[5]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[51]||(t[51]=(0,s.eW)(" Crustacean-Free "))]),(0,s.Lk)("label",tr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"dairy-free","onUpdate:modelValue":t[6]||(t[6]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[52]||(t[52]=(0,s.eW)(" Dairy-Free "))]),(0,s.Lk)("label",ir,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"dash","onUpdate:modelValue":t[7]||(t[7]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[53]||(t[53]=(0,s.eW)(" DASH "))]),(0,s.Lk)("label",ar,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"egg-free","onUpdate:modelValue":t[8]||(t[8]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[54]||(t[54]=(0,s.eW)(" Egg-Free "))]),(0,s.Lk)("label",sr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"fish-free","onUpdate:modelValue":t[9]||(t[9]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[55]||(t[55]=(0,s.eW)(" Fish-Free "))]),(0,s.Lk)("label",rr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"fodmap-free","onUpdate:modelValue":t[10]||(t[10]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[56]||(t[56]=(0,s.eW)(" FODMAP-Free "))]),(0,s.Lk)("label",or,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"immuno-supportive","onUpdate:modelValue":t[11]||(t[11]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[57]||(t[57]=(0,s.eW)(" Immuno-Supportive "))]),(0,s.Lk)("label",nr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"keto-friendly","onUpdate:modelValue":t[12]||(t[12]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[58]||(t[58]=(0,s.eW)(" Keto-Friendly "))]),(0,s.Lk)("label",lr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"kidney-friendly","onUpdate:modelValue":t[13]||(t[13]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[59]||(t[59]=(0,s.eW)(" Kidney-Friendly "))]),(0,s.Lk)("label",cr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"kosher","onUpdate:modelValue":t[14]||(t[14]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[60]||(t[60]=(0,s.eW)(" Kosher "))]),(0,s.Lk)("label",dr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"low-potassium","onUpdate:modelValue":t[15]||(t[15]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[61]||(t[61]=(0,s.eW)(" Low Potassium "))]),(0,s.Lk)("label",ur,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"low-sugar","onUpdate:modelValue":t[16]||(t[16]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[62]||(t[62]=(0,s.eW)(" Low Sugar "))]),(0,s.Lk)("label",pr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"lupine-free","onUpdate:modelValue":t[17]||(t[17]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[63]||(t[63]=(0,s.eW)(" Lupine-Free "))]),(0,s.Lk)("label",hr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"mediterranean","onUpdate:modelValue":t[18]||(t[18]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[64]||(t[64]=(0,s.eW)(" Mediterranean "))]),(0,s.Lk)("label",mr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"mollusk-free","onUpdate:modelValue":t[19]||(t[19]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[65]||(t[65]=(0,s.eW)(" Mollusk-Free "))]),(0,s.Lk)("label",gr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"mustard-free","onUpdate:modelValue":t[20]||(t[20]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[66]||(t[66]=(0,s.eW)(" Mustard-Free "))]),(0,s.Lk)("label",yr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"no-oil-added","onUpdate:modelValue":t[21]||(t[21]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[67]||(t[67]=(0,s.eW)(" No oil added "))]),(0,s.Lk)("label",kr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"paleo","onUpdate:modelValue":t[22]||(t[22]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[68]||(t[68]=(0,s.eW)(" Paleo "))]),(0,s.Lk)("label",_r,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"peanut-free","onUpdate:modelValue":t[23]||(t[23]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[69]||(t[69]=(0,s.eW)(" Peanut-Free "))]),(0,s.Lk)("label",fr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"pescatarian","onUpdate:modelValue":t[24]||(t[24]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[70]||(t[70]=(0,s.eW)(" Pescatarian "))]),(0,s.Lk)("label",vr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"pork-free","onUpdate:modelValue":t[25]||(t[25]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[71]||(t[71]=(0,s.eW)(" Pork-Free "))]),(0,s.Lk)("label",br,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"red-meat-free","onUpdate:modelValue":t[26]||(t[26]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[72]||(t[72]=(0,s.eW)(" Red-Meat-Free "))]),(0,s.Lk)("label",Lr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"sesame-free","onUpdate:modelValue":t[27]||(t[27]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[73]||(t[73]=(0,s.eW)(" Sesame-Free "))]),(0,s.Lk)("label",Cr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"shellfish-free","onUpdate:modelValue":t[28]||(t[28]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[74]||(t[74]=(0,s.eW)(" Shellfish-Free "))]),(0,s.Lk)("label",wr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"soy-free","onUpdate:modelValue":t[29]||(t[29]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[75]||(t[75]=(0,s.eW)(" Soy-Free "))]),(0,s.Lk)("label",Ir,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"sugar-conscious","onUpdate:modelValue":t[30]||(t[30]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[76]||(t[76]=(0,s.eW)(" Sugar-Conscious "))]),(0,s.Lk)("label",Er,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"sulfite-free","onUpdate:modelValue":t[31]||(t[31]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[77]||(t[77]=(0,s.eW)(" Sulfite-Free "))]),(0,s.Lk)("label",Dr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"tree-nut-free","onUpdate:modelValue":t[32]||(t[32]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[78]||(t[78]=(0,s.eW)(" Tree-Nut-Free "))]),(0,s.Lk)("label",xr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"wheat-free","onUpdate:modelValue":t[33]||(t[33]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[79]||(t[79]=(0,s.eW)(" Wheat-Free "))]),(0,s.Lk)("label",Rr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"vegetarian","onUpdate:modelValue":t[34]||(t[34]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[80]||(t[80]=(0,s.eW)(" Vegetarian "))]),(0,s.Lk)("label",Pr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"vegan","onUpdate:modelValue":t[35]||(t[35]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[81]||(t[81]=(0,s.eW)(" Vegan "))]),(0,s.Lk)("label",Fr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"gluten-free","onUpdate:modelValue":t[36]||(t[36]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[82]||(t[82]=(0,s.eW)(" Gluten-Free "))]),(0,s.Lk)("label",Ar,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"balanced","onUpdate:modelValue":t[37]||(t[37]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[83]||(t[83]=(0,s.eW)(" Balanced "))]),(0,s.Lk)("label",Sr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"high-fiber","onUpdate:modelValue":t[38]||(t[38]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[84]||(t[84]=(0,s.eW)(" High-Fiber "))]),(0,s.Lk)("label",Ur,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"high-protein","onUpdate:modelValue":t[39]||(t[39]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[85]||(t[85]=(0,s.eW)(" High-Protein "))]),(0,s.Lk)("label",Xr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"low-carb","onUpdate:modelValue":t[40]||(t[40]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[86]||(t[86]=(0,s.eW)(" Low-Carb "))]),(0,s.Lk)("label",Nr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"low-fat","onUpdate:modelValue":t[41]||(t[41]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[87]||(t[87]=(0,s.eW)(" Low-Fat "))]),(0,s.Lk)("label",Mr,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:"low-sodium","onUpdate:modelValue":t[42]||(t[42]=e=>o.user.dietaryPreferences=e)},null,512),[[a.lH,o.user.dietaryPreferences]]),t[88]||(t[88]=(0,s.eW)(" Low-Sodium "))])])]),(0,s.Lk)("div",Tr,[t[92]||(t[92]=(0,s.Lk)("label",{class:"profile-container__label"},"Notification Preferences:",-1)),(0,s.Lk)("div",$r,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[43]||(t[43]=e=>o.user.notifications=e),class:"form-check-input",id:"notifications"},null,512),[[a.lH,o.user.notifications]]),t[90]||(t[90]=(0,s.Lk)("label",{class:"profile-container__form-check-label",for:"notifications"}," I would like to receive notifications! ",-1))]),o.user.notifications?((0,s.uX)(),(0,s.CE)("div",Hr,[(0,s.Lk)("div",Vr,[t[91]||(t[91]=(0,s.Lk)("label",{class:"profile-container__label",for:"daysBeforeExpiry"},"Notify me before an item expires (in days):",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[44]||(t[44]=e=>o.notificationSettings.daysBeforeExpiry=e),class:"profile-container__input",min:"1",max:"30",required:""},null,512),[[a.Jo,o.notificationSettings.daysBeforeExpiry]])])])):(0,s.Q3)("",!0)]),t[93]||(t[93]=(0,s.Lk)("button",{type:"submit",class:"profile-container__button"},"Update Profile",-1)),o.message?((0,s.uX)(),(0,s.CE)("div",Wr,(0,x.v_)(o.message),1)):(0,s.Q3)("",!0),o.error?((0,s.uX)(),(0,s.CE)("div",qr,(0,x.v_)(o.error),1)):(0,s.Q3)("",!0)],32)])}var Or={data(){return{user:{email:"",displayName:"",dietaryPreferences:[],notifications:!1},notificationSettings:{daysBeforeExpiry:3},message:"",error:""}},async created(){const e=JSON.parse(localStorage.getItem("user"));if(e){this.user.email=e.email;const t=await(0,f.x7)((0,f.H9)(w,"users",e.uid));t.exists()?this.user={...this.user,...t.data()}:console.error("No such document!")}else console.error("No user logged in"),this.$router.push("/login")},methods:{async updateProfile(){this.message="",this.error="";const e=JSON.parse(localStorage.getItem("user"));try{const t={displayName:this.user.displayName,dietaryPreferences:this.user.dietaryPreferences,notifications:this.user.notifications};this.user.notifications&&(t.notificationSettings={daysBeforeExpiry:this.notificationSettings.daysBeforeExpiry}),await(0,f.mZ)((0,f.H9)(w,"users",e.uid),t),this.message="Profile updated successfully!"}catch(t){this.error="Error updating profile: "+t.message}}}};const Jr=(0,m.A)(Or,[["render",Qr]]);var Gr=Jr,Br={components:{ProfileSettings:Gr}};const Kr=(0,m.A)(Br,[["render",Os]]);var jr=Kr;const Yr={class:"logout"},zr={class:"logout__container"},Zr={class:"logout__card"},eo={key:0,class:"logout__content"},to={key:1,class:"logout__content"},io={class:"logout__alert logout__alert--error"};function ao(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",Yr,[(0,s.Lk)("div",zr,[(0,s.Lk)("div",Zr,[r.isLoading?((0,s.uX)(),(0,s.CE)("div",eo,t[1]||(t[1]=[(0,s.Lk)("div",{class:"logout__spinner"},null,-1),(0,s.Lk)("p",{class:"logout__message"},"Logging out, please wait...",-1)]))):(0,s.Q3)("",!0),r.error?((0,s.uX)(),(0,s.CE)("div",to,[(0,s.Lk)("div",io,(0,x.v_)(r.error),1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.retryLogout&&o.retryLogout(...e)),class:"logout__button"}," Try Again ")])):(0,s.Q3)("",!0)])])])}var so={data(){return{isLoading:!0,error:null}},methods:{async retryLogout(){this.error=null,this.isLoading=!0,await this.performLogout()},async performLogout(){try{await C.signOut(),this.$router.push("/login")}catch(e){console.error("Logout failed:",e),this.error="Failed to log out. Please try again.",this.isLoading=!1}}},async created(){await this.performLogout()}};const ro=(0,m.A)(so,[["render",ao]]);var oo=ro;const no={class:"recipe-explorer"},lo={class:"recipe-explorer__container"},co={class:"search-block search-block--fridge"},uo={class:"search-block__dropdown-wrapper"},po=["value"],ho=["value"],mo={class:"search-block"},go={class:"search-block"},yo={class:"filters-block"},ko={class:"filters-block__group"},_o={class:"filters-block__group"},fo={class:"filters-block__group filters-block__group"},vo={class:"filters-block__group"},bo={class:"filters-block__buttons"},Lo={class:"recipe-grid"},Co={class:"recipe-card__image-container"},wo=["src","alt"],Io={class:"recipe-card__content"},Eo={class:"recipe-card__info"},Do={class:"recipe-card__title"},xo={class:"recipe-card__time"},Ro={class:"recipe-card__diet"},Po=["onClick"],Fo={class:"pagination"},Ao=["disabled"],So={class:"pagination__text"},Uo=["disabled"];function Xo(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",no,[(0,s.Lk)("div",lo,[t[26]||(t[26]=(0,s.Lk)("h2",{class:"recipe-explorer__title"},"🥘 Recommended Recipes",-1)),(0,s.Lk)("div",co,[t[15]||(t[15]=(0,s.Lk)("label",{class:"search-block__label",for:"fridgeIngredientsSearch"},"🧊 Ingredients from Fridge:",-1)),(0,s.Lk)("div",uo,[(0,s.Lk)("input",{type:"text",id:"fridgeIngredientsSearch",class:"search-block__input",value:o.selectedFridgeIngredients.join(", "),onFocus:t[0]||(t[0]=e=>o.showIngredientsDropdown=!0),onBlur:t[1]||(t[1]=(...e)=>n.handleBlur&&n.handleBlur(...e)),placeholder:"Select ingredients (click to open)",readonly:""},null,40,po),o.showIngredientsDropdown?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"search-block__dropdown",onMousedown:t[4]||(t[4]=(0,a.D$)((()=>{}),["prevent"]))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.items,(e=>((0,s.uX)(),(0,s.CE)("label",{key:e.id,class:"search-block__checkbox-label"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",value:e.name,"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedFridgeIngredients=e),onChange:t[3]||(t[3]=(...e)=>n.updateIngredientsSearch&&n.updateIngredientsSearch(...e)),class:"search-block__checkbox"},null,40,ho),[[a.lH,o.selectedFridgeIngredients]]),(0,s.eW)(" "+(0,x.v_)(e.name),1)])))),128))],32)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",mo,[t[16]||(t[16]=(0,s.Lk)("label",{class:"search-block__label",for:"ingredientSearch"},"🔍 Search by Ingredients:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>o.ingredientQuery=e),placeholder:"Enter ingredients (comma separated)",id:"ingredientSearch",class:"search-block__input"},null,512),[[a.Jo,o.ingredientQuery]])]),(0,s.Lk)("div",go,[t[17]||(t[17]=(0,s.Lk)("label",{class:"search-block__label",for:"recipeSearch"},"📖 Search by Recipe Name:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>o.recipeNameQuery=e),placeholder:"Enter recipe name",id:"recipeSearch",class:"search-block__input"},null,512),[[a.Jo,o.recipeNameQuery]])]),(0,s.Lk)("div",yo,[(0,s.Lk)("div",ko,[t[19]||(t[19]=(0,s.Lk)("label",{class:"filters-block__label",for:"cuisine"},"🌎 Cuisine Type:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.cuisine=e),class:"filters-block__select"},t[18]||(t[18]=[(0,s.Fv)('<option value="" data-v-4b290293>None</option><option value="american" data-v-4b290293>American</option><option value="asian" data-v-4b290293>Asian</option><option value="british" data-v-4b290293>British</option><option value="caribbean" data-v-4b290293>Caribbean</option><option value="central europe" data-v-4b290293>Central Europe</option><option value="chinese" data-v-4b290293>Chinese</option><option value="eastern europe" data-v-4b290293>Eastern Europe</option><option value="french" data-v-4b290293>French</option><option value="greek" data-v-4b290293>Greek</option><option value="indian" data-v-4b290293>Indian</option><option value="italian" data-v-4b290293>Italian</option><option value="japanese" data-v-4b290293>Japanese</option><option value="korean" data-v-4b290293>Korean</option><option value="kosher" data-v-4b290293>Kosher</option><option value="mediterranean" data-v-4b290293>Mediterranean</option><option value="mexican" data-v-4b290293>Mexican</option><option value="middle eastern" data-v-4b290293>Middle Eastern</option><option value="nordic" data-v-4b290293>Nordic</option><option value="south american" data-v-4b290293>South American</option><option value="south east asian" data-v-4b290293>South East Asian</option><option value="world" data-v-4b290293>World</option>',22)]),512),[[a.u1,o.cuisine]])]),(0,s.Lk)("div",_o,[t[21]||(t[21]=(0,s.Lk)("label",{class:"filters-block__label",for:"diet"},"🥗 Diet Types:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.diet=e),class:"filters-block__select"},t[20]||(t[20]=[(0,s.Fv)('<option value="" data-v-4b290293>None</option><option value="balanced" data-v-4b290293>⚖️ Balanced</option><option value="high-fiber" data-v-4b290293>🌾 High-Fiber</option><option value="high-protein" data-v-4b290293>🥩 High-Protein</option><option value="low-carb" data-v-4b290293>🥖 Low-Carb</option><option value="low-fat" data-v-4b290293>💪 Low-Fat</option><option value="low-sodium" data-v-4b290293>🧂 Low-Sodium</option>',7)]),512),[[a.u1,o.diet]])]),(0,s.Lk)("div",fo,[t[23]||(t[23]=(0,s.Lk)("label",{class:"filters-block__label",for:"health"},"⚕️ Dietary Restrictions:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedHealthLabels=e),class:"filters-block__select"},t[22]||(t[22]=[(0,s.Fv)('<option value="" data-v-4b290293>None</option><option value="alcohol-cocktail" data-v-4b290293>Alcohol-Cocktail</option><option value="alcohol-free" data-v-4b290293>Alcohol-Free</option><option value="celery-free" data-v-4b290293>Celery-Free</option><option value="crustacean-free" data-v-4b290293>Crustacean-Free</option><option value="dairy-free" data-v-4b290293>Dairy-Free</option><option value="dash" data-v-4b290293>DASH</option><option value="egg-free" data-v-4b290293>Egg-Free</option><option value="fish-free" data-v-4b290293>Fish-Free</option><option value="fodmap-free" data-v-4b290293>FODMAP-Free</option><option value="gluten-free" data-v-4b290293>Gluten-Free</option><option value="immuno-supportive" data-v-4b290293>Immuno-Supportive</option><option value="keto-friendly" data-v-4b290293>Keto-Friendly</option><option value="kidney-friendly" data-v-4b290293>Kidney-Friendly</option><option value="kosher" data-v-4b290293>Kosher</option><option value="low-potassium" data-v-4b290293>Low Potassium</option><option value="low-sugar" data-v-4b290293>Low Sugar</option><option value="lupine-free" data-v-4b290293>Lupine-Free</option><option value="mediterranean" data-v-4b290293>Mediterranean</option><option value="mollusk-free" data-v-4b290293>Mollusk-Free</option><option value="mustard-free" data-v-4b290293>Mustard-Free</option><option value="no-oil-added" data-v-4b290293>No oil added</option><option value="paleo" data-v-4b290293>Paleo</option><option value="peanut-free" data-v-4b290293>Peanut-Free</option><option value="pescatarian" data-v-4b290293>Pescatarian</option><option value="pork-free" data-v-4b290293>Pork-Free</option><option value="red-meat-free" data-v-4b290293>Red-Meat-Free</option><option value="sesame-free" data-v-4b290293>Sesame-Free</option><option value="shellfish-free" data-v-4b290293>Shellfish-Free</option><option value="soy-free" data-v-4b290293>Soy-Free</option><option value="sugar-conscious" data-v-4b290293>Sugar-Conscious</option><option value="sulfite-free" data-v-4b290293>Sulfite-Free</option><option value="tree-nut-free" data-v-4b290293>Tree-Nut-Free</option><option value="vegan" data-v-4b290293>Vegan</option><option value="vegetarian" data-v-4b290293>Vegetarian</option><option value="wheat-free" data-v-4b290293>Wheat-Free</option>',36)]),512),[[a.u1,o.selectedHealthLabels]])]),(0,s.Lk)("div",vo,[t[25]||(t[25]=(0,s.Lk)("label",{class:"filters-block__label",for:"meal"},"🍽️ Meal Type:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.meal=e),class:"filters-block__select"},t[24]||(t[24]=[(0,s.Fv)('<option value="" data-v-4b290293>All</option><option value="breakfast" data-v-4b290293>🍳 Breakfast</option><option value="brunch" data-v-4b290293>🥪 Brunch</option><option value="lunch" data-v-4b290293>🥗 Lunch/Dinner</option><option value="snack" data-v-4b290293>🍿 Snack</option><option value="teatime" data-v-4b290293>☕ Teatime</option>',6)]),512),[[a.u1,o.meal]])]),(0,s.Lk)("div",bo,[(0,s.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.fetchRecipes&&n.fetchRecipes(...e)),class:"filters-block__button filters-block__button--search"}," 🔍 Find Recipes "),(0,s.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.viewFavourites&&n.viewFavourites(...e)),class:"filters-block__button filters-block__button--favorites"}," ❤️ View Favourites ")])]),(0,s.Lk)("div",Lo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.recipes,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.uri,class:"recipe-card"},[(0,s.Lk)("div",Co,[(0,s.Lk)("img",{src:e.image,alt:e.label,class:"recipe-card__image"},null,8,wo)]),(0,s.Lk)("div",Io,[(0,s.Lk)("div",Eo,[(0,s.Lk)("h3",Do,(0,x.v_)(e.label),1),(0,s.Lk)("p",xo,"⏱️ Ready in: "+(0,x.v_)(n.formatDuration(e.totalTime)),1),(0,s.Lk)("p",Ro,"🥗 Diet Types: "+(0,x.v_)(e.dietLabels.join(", ")||"None"),1)]),(0,s.Lk)("button",{onClick:t=>n.viewRecipe(e),class:"recipe-card__button"}," 👩‍🍳 View Recipe ",8,Po)])])))),128))])]),(0,s.Lk)("div",Fo,[(0,s.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.prevPage&&n.prevPage(...e)),disabled:1===o.currentPage,class:"pagination__button pagination__button--prev"}," ◀️ Previous ",8,Ao),(0,s.Lk)("span",So,"Page "+(0,x.v_)(o.currentPage),1),(0,s.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.nextPage&&n.nextPage(...e)),disabled:o.currentPage*o.recipesPerPage>=o.totalRecipes,class:"pagination__button pagination__button--next"}," Next ▶️ ",8,Uo)])])}var No=i(4373),Mo={data(){return{ingredientQuery:"",recipeNameQuery:"",recipes:[],cuisine:"",diet:"",selectedHealthLabels:"",meal:"",currentPage:1,recipesPerPage:12,totalRecipes:0,selectedFridgeIngredients:[],items:[],showIngredientsDropdown:!1}},async created(){const e=JSON.parse(localStorage.getItem("user"));if(e)try{const t=await(0,f.x7)((0,f.H9)(w,"users",e.uid));t.exists()?this.selectedHealthLabels=t.data().dietaryPreferences[0]||"":console.error("No such document!")}catch(t){console.error("Error fetching user data:",t)}else console.error("No user logged in"),this.$router.push("/login");await this.getCurrentUserItems(),await this.fetchRecipes2()},methods:{handleBlur(e){e.relatedTarget&&"checkbox"===e.relatedTarget.type||setTimeout((()=>{this.showIngredientsDropdown=!1}),200)},updateIngredientsSearch(){console.log("Selected ingredients:",this.selectedFridgeIngredients),this.ingredientQuery=this.selectedFridgeIngredients.map((e=>e.trim())).join(","),console.log("Ingredient query:",this.ingredientQuery)},async getCurrentUserItems(){const e=(0,p.xI)(),t=e.currentUser;if(t)try{const e=await(0,f.GG)((0,f.rJ)(w,`users/${t.uid}/items`));this.items=e.docs.map((e=>({id:e.id,...e.data()}))),console.log("Fridge items:",this.items)}catch(i){console.error("Error fetching items:",i)}else console.error("User is not authenticated")},async fetchRecipes(){let e=[];this.recipeNameQuery&&e.push(this.recipeNameQuery),this.ingredientQuery&&e.push(this.ingredientQuery),this.selectedFridgeIngredients.length>0&&e.push(this.selectedFridgeIngredients.join(" "));let t=e.join(" "),i=(this.currentPage-1)*this.recipesPerPage,a=i+this.recipesPerPage,s=`https://api.edamam.com/search?q=${t}&app_id=fcbb645c&app_key=475ad8f07b669d07d1b4e5a021a100cc&from=${i}&to=${a}`;this.cuisine&&(s+=`&cuisineType=${this.cuisine}`),this.diet&&(s+=`&diet=${this.diet}`),this.selectedHealthLabels&&(s+=`&health=${this.selectedHealthLabels}`),this.meal&&(s+=`&mealType=${this.meal}`);try{const e=await No.A.get(s);this.recipes=e.data.hits.map((e=>e.recipe)),this.totalRecipes=e.data.count}catch(r){console.error("Error fetching recipes:",r)}},async fetchRecipes2(){const e=this.items.map((e=>e.name)).join(",");console.log(e);const t=this.ingredientQuery?this.ingredientQuery:e;console.log(t);const i=(this.currentPage-1)*this.recipesPerPage,a=i+this.recipesPerPage;let s=`https://api.edamam.com/search?q=${t}&app_id=fcbb645c&app_key=475ad8f07b669d07d1b4e5a021a100cc&from=${i}&to=${a}`;this.selectedHealthLabels&&(s+=`&health=${this.selectedHealthLabels}`);try{const e=await No.A.get(s);this.recipes=e.data.hits.map((e=>e.recipe)),this.totalRecipes=e.data.count}catch(r){console.error("Error fetching recipes:",r)}},nextPage(){this.currentPage*this.recipesPerPage<this.totalRecipes&&(this.currentPage++,this.fetchRecipes())},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchRecipes())},viewRecipe(e){const t=encodeURIComponent(e.uri);this.$router.push({name:"RecipeDetails",params:{id:t}})},viewFavourites(){this.$router.push({name:"Favourites"})},formatDuration(e){if(!e||0===e)return"Duration unavailable";if(e<60)return`${e} minutes`;const t=Math.floor(e/60),i=e%60;return 0===i?`${t} ${1===t?"hour":"hours"}`:`${t} ${1===t?"hour":"hours"} ${i} ${1===i?"minute":"minutes"}`}}};const To=(0,m.A)(Mo,[["render",Xo],["__scopeId","data-v-4b290293"]]);var $o=To;const Ho={key:0,class:"recipe"},Vo={class:"recipe__header"},Wo={class:"recipe__title"},qo={class:"recipe__time"},Qo={key:0,class:"recipe__nutrition"},Oo={class:"recipe__nutrition-list"},Jo={class:"recipe__nutrition-item"},Go={class:"recipe__nutrition-item"},Bo={class:"recipe__nutrition-item"},Ko={class:"recipe__nutrition-item"},jo={class:"recipe__ingredients"},Yo={class:"recipe__ingredients-list"},zo={class:"recipe__instructions"},Zo=["innerHTML"],en={class:"recipe__actions"},tn={key:1,class:"recipe__loading"};function an(e,t,i,a,r,o){return r.recipe&&r.recipe.label?((0,s.uX)(),(0,s.CE)("div",Ho,[(0,s.Lk)("header",Vo,[(0,s.Lk)("h1",Wo,(0,x.v_)(r.recipe.label),1),(0,s.Lk)("p",qo,[t[2]||(t[2]=(0,s.eW)("Ready in ")),(0,s.Lk)("strong",null,(0,x.v_)(r.recipe.totalTime),1),t[3]||(t[3]=(0,s.eW)(" minutes"))])]),r.nutrition?((0,s.uX)(),(0,s.CE)("section",Qo,[t[8]||(t[8]=(0,s.Lk)("h2",{class:"recipe__nutrition-title"},"Nutritional Information",-1)),(0,s.Lk)("ul",Oo,[(0,s.Lk)("li",Jo,[t[4]||(t[4]=(0,s.Lk)("span",null,"Calories",-1)),(0,s.Lk)("strong",null,(0,x.v_)(r.nutrition.calories)+" kcal",1)]),(0,s.Lk)("li",Go,[t[5]||(t[5]=(0,s.Lk)("span",null,"Protein",-1)),(0,s.Lk)("strong",null,(0,x.v_)(r.nutrition.protein)+" g",1)]),(0,s.Lk)("li",Bo,[t[6]||(t[6]=(0,s.Lk)("span",null,"Carbohydrates",-1)),(0,s.Lk)("strong",null,(0,x.v_)(r.nutrition.carbs)+" g",1)]),(0,s.Lk)("li",Ko,[t[7]||(t[7]=(0,s.Lk)("span",null,"Fats",-1)),(0,s.Lk)("strong",null,(0,x.v_)(r.nutrition.fats)+" g",1)])])])):(0,s.Q3)("",!0),(0,s.Lk)("section",jo,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"recipe__ingredients-title"},"Ingredients",-1)),(0,s.Lk)("ul",Yo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.recipe.ingredientLines,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:(0,x.C4)(["recipe__ingredient",{"recipe__ingredient--available":r.fridgeItems.includes(e)}])},(0,x.v_)(e),3)))),128))])]),(0,s.Lk)("section",zo,[t[10]||(t[10]=(0,s.Lk)("h2",{class:"recipe__instructions-title"},"Instructions",-1)),(0,s.Lk)("div",{class:"recipe__instructions-content",innerHTML:o.formattedInstructions},null,8,Zo)]),(0,s.Lk)("div",en,[(0,s.Lk)("button",{class:"recipe__button recipe__button--primary",onClick:t[0]||(t[0]=(...e)=>o.cookNow&&o.cookNow(...e))}," Mark as completed "),(0,s.Lk)("button",{class:(0,x.C4)(["recipe__button recipe__button--secondary",{"recipe__button--active":o.isRecipeInFavorites}]),onClick:t[1]||(t[1]=(...e)=>o.toggleFavorite&&o.toggleFavorite(...e))},(0,x.v_)(o.isRecipeInFavorites?"Remove from Favorites":"Add to Favorites"),3)])])):((0,s.uX)(),(0,s.CE)("div",tn," Loading recipe details... "))}const{GoogleGenerativeAI:sn}=i(4322);var rn={data(){return{recipe:{},fridgeItems:[],instructions:"",nutrition:null,currentUserId:null,favoriteRecipes:[]}},computed:{formattedInstructions(){let e=this.instructions;return e=e.replace(/^##\s(.+)$/gm,'<h3 class="recipe__section-title">$1</h3>'),e=e.replace(/^\*\*([^*]+)\*\*:$/gm,'<h4 class="recipe__subsection-title">$1:</h4>'),e=e.replace(/^\d+\.\s\*\*([^*]+)\*\*:\s(.+)$/gm,'<div class="recipe__step"><span class="recipe__step-title">$1:</span> $2</div>'),e=e.replace(/^\*\s(.+)$/gm,'<li class="recipe__list-item">$1</li>'),e=e.replace(/(?:(<li class="recipe__list-item">.+<\/li>\n?)+)/g,'<ul class="recipe__list">$1</ul>'),e=e.replace(/\*\*([^*]+)\*\*/g,'<strong class="recipe__text-bold">$1</strong>'),e=e.split("\n\n").map((e=>e.startsWith("<")?e:`<p class="recipe__paragraph">${e}</p>`)).join("\n"),e},isRecipeInFavorites(){return this.favoriteRecipes.some((e=>e.label===this.recipe.label))}},mounted(){const e=this.$route.params.id;e?this.fetchRecipeById(e):console.error("Recipe not found or invalid recipe data."),(0,p.hg)(C,(async e=>{e&&(this.currentUserId=e.uid,await this.loadFavoriteRecipes())}))},methods:{async fetchInstructions(){try{const e=new sn({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_KEY),t=e.getGenerativeModel({model:"gemini-1.5-flash"}),i=`Write step-by-step instructions for making ${this.recipe.label} using the following ingredients: ${this.recipe.ingredientLines.join(", ")}.`,a=await t.generateContent(i);this.instructions=a?.response?.candidates?.[0]?.content?.parts?.[0]?.text?a.response.candidates[0].content.parts[0].text:"No instructions available."}catch(e){console.error("Error generating instructions:",e),this.instructions="Error generating instructions."}},async fetchRecipeById(e){try{const t=await No.A.get(`https://api.edamam.com/search?r=${e}&app_id=fcbb645c&app_key=475ad8f07b669d07d1b4e5a021a100cc`);t.data?.[0]&&(this.recipe=t.data[0],await this.fetchInstructions(),this.nutrition={calories:Math.round(this.recipe.calories),protein:this.recipe.totalNutrients.PROCNT?.quantity.toFixed(1)??"N/A",carbs:this.recipe.totalNutrients.CHOCDF?.quantity.toFixed(1)??"N/A",fats:this.recipe.totalNutrients.FAT?.quantity.toFixed(1)??"N/A"})}catch(t){console.error("Error fetching recipe by ID:",t)}},async cookNow(){if(!this.currentUserId)return;const e={label:this.recipe.label,image:this.recipe.image,url:this.recipe.url,ingredientLines:this.recipe.ingredientLines,totalTime:this.recipe.totalTime,completionDate:(new Date).toLocaleDateString()};try{const t=(0,f.rJ)(w,`users/${this.currentUserId}/completedRecipes`);await(0,f.gS)(t,e),this.$router.push({name:"CookNow",params:{recipe:this.recipe,fridgeIngredients:this.fridgeItems}})}catch(t){console.error("Error marking recipe as completed:",t)}},async loadFavoriteRecipes(){if(this.currentUserId)try{const e=(0,f.rJ)(w,`users/${this.currentUserId}/favorites`),t=await(0,f.GG)(e);this.favoriteRecipes=t.docs.map((e=>({id:e.id,...e.data()})))}catch(e){console.error("Error loading favorite recipes:",e)}},async toggleFavorite(){if(!this.currentUserId)return;const e=this.favoriteRecipes.findIndex((e=>e.label===this.recipe.label));try{if(-1!==e){const t=this.favoriteRecipes[e].id;await(0,f.kd)((0,f.H9)(w,`users/${this.currentUserId}/favorites`,t)),this.favoriteRecipes.splice(e,1)}else{const e={label:this.recipe.label,image:this.recipe.image,url:this.recipe.url,ingredientLines:this.recipe.ingredientLines,totalTime:this.recipe.totalTime,dateAdded:(new Date).toLocaleDateString()},t=(0,f.rJ)(w,`users/${this.currentUserId}/favorites`),i=await(0,f.gS)(t,e);this.favoriteRecipes.push({id:i.id,...e})}}catch(t){console.error("Error toggling favorite status:",t)}}}};const on=(0,m.A)(rn,[["render",an],["__scopeId","data-v-c8349c6e"]]);var nn=on;const ln={class:"fridge"},cn={class:"fridge__container"},dn={class:"fridge__content"},un={class:"fridge__header"},pn={class:"fridge__controls"},hn={key:0},mn={key:1},gn=["disabled"],yn={key:0,class:"empty-state"},kn=["onClick"],_n={class:"category__title"},fn={key:0,class:"category__grid"},vn={class:"ingredient__body"},bn={class:"ingredient__title"},Ln={class:"ingredient__info"},Cn={class:"ingredient__expiry"},wn={class:"ingredient__controls"},In=["onClick","disabled"],En={class:"ingredient__quantity"},Dn=["onClick"],xn={key:0,class:"ingredient__original"},Rn={key:1,class:"ingredient__warning"};function Pn(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",ln,[(0,s.Lk)("div",cn,[(0,s.Lk)("div",dn,[(0,s.Lk)("header",un,[t[3]||(t[3]=(0,s.Lk)("h2",{class:"fridge__title"},"Edit your fridge items here! 🧊",-1)),(0,s.Lk)("div",pn,[(0,s.Lk)("button",{class:"fridge__button fridge__button--sort",onClick:t[0]||(t[0]=(...e)=>o.sortByCategory&&o.sortByCategory(...e))},[t[2]||(t[2]=(0,s.eW)(" Category 📑 ")),r.isCategoryAscending?((0,s.uX)(),(0,s.CE)("span",hn,"↑")):((0,s.uX)(),(0,s.CE)("span",mn,"↓"))]),(0,s.Lk)("button",{class:"fridge__button fridge__button--save",onClick:t[1]||(t[1]=(...e)=>o.saveAllChanges&&o.saveAllChanges(...e)),disabled:!o.hasChanges}," Save All Changes 💾 ",8,gn)])]),r.items&&0!==r.items.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",yn,t[4]||(t[4]=[(0,s.Lk)("p",{class:"empty-state__text"},"Your Fridge is Empty! Add some ingredients first~ 🥕",-1),(0,s.Lk)("img",{class:"empty-state__image",src:Z,alt:"Empty Fridge"},null,-1)]))),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.categorizedItems,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"category"},[(0,s.Lk)("div",{class:"category__header",onClick:e=>o.toggleCategory(t)},[(0,s.Lk)("h5",_n,(0,x.v_)(t)+" "+(0,x.v_)(o.getCategoryEmoji(t)),1)],8,kn),r.collapsedCategories[t]?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",fn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,x.C4)(["ingredient",{"ingredient--expiring":e.isExpiringSoon,"ingredient--empty":0===e.quantity}])},[(0,s.Lk)("div",vn,[(0,s.Lk)("h6",bn,(0,x.v_)(e.name)+" "+(0,x.v_)(o.getIngredientEmoji(e.name)),1),(0,s.Lk)("div",Ln,[(0,s.Lk)("p",Cn," Expiry Date: "+(0,x.v_)(e.expiryDate)+" ⏰ ",1),(0,s.Lk)("div",wn,[(0,s.Lk)("button",{class:"ingredient__button",onClick:t=>o.decrementQuantity(e),disabled:e.quantity<=0,"aria-label":"Decrease quantity"}," - ",8,In),(0,s.Lk)("span",En,(0,x.v_)(e.quantity),1),(0,s.Lk)("button",{class:"ingredient__button",onClick:t=>o.incrementQuantity(e),"aria-label":"Increase quantity"}," + ",8,Dn)]),o.hasItemChanged(e)?((0,s.uX)(),(0,s.CE)("div",xn," Original: "+(0,x.v_)(o.getOriginalQuantity(e.id))+" 📝 ",1)):(0,s.Q3)("",!0),0===e.quantity?((0,s.uX)(),(0,s.CE)("div",Rn," This item will be removed when changes are saved ⚠️ ")):(0,s.Q3)("",!0)])])],2)))),128))]))])))),128))])])])}i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698);var Fn={name:"FridgeManager",data(){return{currentUserId:null,items:[],originalItems:{},collapsedCategories:{},isCategoryAscending:!1,sortOrder:"asc",itemsToDelete:new Set}},computed:{categorizedItems(){const e={};return this.items.forEach((t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)})),e},hasChanges(){return this.items.some((e=>this.hasItemChanged(e)||this.itemsToDelete.has(e.id)))}},methods:{async getCurrentUserItems(){const e=new Date;if(e.setHours(0,0,0,0),this.currentUserId)try{const t=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/items`));this.items=[],t.forEach((t=>{const i={id:t.id,...t.data()},a=new Date(i.expiryDate),s=(a-e)/864e5;i.isExpiringSoon=s<=3,this.items.push(i),this.originalItems[i.id]=i.quantity})),this.sortItems()}catch(t){console.error("Error fetching items: ",t)}},toggleCategory(e){this.collapsedCategories[e]=!this.collapsedCategories[e]},sortByCategory(){this.isCategoryAscending=!this.isCategoryAscending,this.items.sort(((e,t)=>{const i=e.category.localeCompare(t.category);return this.isCategoryAscending?i:-i}))},sortItems(){this.items.sort(((e,t)=>e.name.localeCompare(t.name)))},incrementQuantity(e){0===e.quantity&&this.itemsToDelete.delete(e.id),e.quantity++},decrementQuantity(e){e.quantity>0&&(e.quantity--,0===e.quantity&&this.itemsToDelete.add(e.id))},hasItemChanged(e){return this.originalItems[e.id]!==e.quantity},getOriginalQuantity(e){return this.originalItems[e]},getCategoryEmoji(e){const t={Vegetables:"🥬",Fruits:"🍎",Meat:"🥩",Dairy:"🥛",Grains:"🌾",Seafood:"🐟",Condiments:"🧂",Beverages:"🥤",Snacks:"🍿",Other:"📦"};return t[e]||"🔍"},getIngredientEmoji(e){const t={Apple:"🍎",Banana:"🍌",Carrot:"🥕",Milk:"🥛",Egg:"🥚",Chicken:"🍗",Fish:"🐟",Rice:"🍚",Bread:"🍞"};return t[e]||""},async moveToUsedItems(e){try{await(0,f.gS)((0,f.rJ)(w,`users/${this.currentUserId}/usedItems`),{...e,usedAt:(new Date).toISOString(),originalQuantity:this.originalItems[e.id],finalQuantity:0})}catch(t){console.error("Error moving item to used items: ",t)}},async saveAllChanges(){try{const e=this.items.filter((e=>this.hasItemChanged(e)&&e.quantity>0));for(const i of e){const e=(0,f.H9)(w,`users/${this.currentUserId}/items`,i.id);await(0,f.mZ)(e,{quantity:i.quantity}),this.originalItems[i.id]=i.quantity}const t=this.items.filter((e=>0===e.quantity));for(const i of t){await this.moveToUsedItems(i);const e=(0,f.H9)(w,`users/${this.currentUserId}/items`,i.id);await(0,f.kd)(e),this.items=this.items.filter((e=>e.id!==i.id)),delete this.originalItems[i.id],this.itemsToDelete.delete(i.id)}alert("All changes saved successfully! 🎉")}catch(e){console.error("Error saving changes: ",e),alert("Error saving changes. Please try again. ❌")}}},mounted(){(0,p.hg)(C,(async e=>{e&&(this.currentUserId=e.uid,await this.getCurrentUserItems())}))}};const An=(0,m.A)(Fn,[["render",Pn],["__scopeId","data-v-5197db4f"]]);var Sn=An;const Un={class:"favorites"},Xn={key:0,class:"favorites__empty"},Nn={key:1,class:"favorites__grid"},Mn={class:"recipe-card__image-container"},Tn=["src","alt"],$n={class:"recipe-card__title"},Hn={class:"recipe-card__time"},Vn={class:"recipe-card__actions"},Wn=["onClick"],qn=["onClick"];function Qn(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",Un,[t[1]||(t[1]=(0,s.Lk)("h1",{class:"favorites__title"},"🌟 Your Favorite Recipes",-1)),0===r.favoriteRecipes.length?((0,s.uX)(),(0,s.CE)("div",Xn,t[0]||(t[0]=[(0,s.Lk)("p",null,"📚 You have no favorite recipes yet!",-1)]))):((0,s.uX)(),(0,s.CE)("div",Nn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.favoriteRecipes,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"recipe-card"},[(0,s.Lk)("div",Mn,[(0,s.Lk)("img",{src:e.image,alt:e.label,class:"recipe-card__image"},null,8,Tn)]),(0,s.Lk)("h2",$n,(0,x.v_)(e.label),1),(0,s.Lk)("p",Hn,"⏰ Total Time: "+(0,x.v_)(e.totalTime)+" minutes",1),(0,s.Lk)("div",Vn,[(0,s.Lk)("button",{onClick:t=>o.toggleFavorite(e),class:"recipe-card__button recipe-card__button--favorite"},(0,x.v_)(o.isFavorite(e)?"❌ Remove":"❤️ Add to Favorites"),9,Wn),(0,s.Lk)("button",{class:"recipe-card__button recipe-card__button--details",onClick:t=>o.viewDetails(e)}," 👀 View Details ",8,qn)])])))),128))]))])}var On={name:"FavouritesDisplay",data(){return{favoriteRecipes:[],currentUserId:null}},async created(){const e=C.currentUser;e?(this.currentUserId=e.uid,console.log("Current User ID:",this.currentUserId),await this.fetchFavoriteRecipes()):(console.error("User not authenticated. Redirecting to login."),this.$router.push("/login"))},methods:{async fetchFavoriteRecipes(){if(console.log("Current User ID:",this.currentUserId),this.currentUserId)try{const e=(0,f.rJ)(w,`users/${this.currentUserId}/favorites`),t=await(0,f.GG)(e);this.favoriteRecipes=t.docs.map((e=>({id:e.id,...e.data()}))),console.log("Fetched favorite recipes:",this.favoriteRecipes)}catch(e){console.error("Error fetching favorite recipes:",e)}else console.error("No current user ID found")},async toggleFavorite(e){const t=this.favoriteRecipes.findIndex((t=>t.label===e.label));if(-1!==t){const e=this.favoriteRecipes[t].id;await(0,f.kd)((0,f.H9)(w,`users/${this.currentUserId}/favorites`,e)),this.favoriteRecipes.splice(t,1),alert("Recipe removed from favorites!")}else{const t={label:e.label,image:e.image,url:e.url,ingredientLines:e.ingredientLines,totalTime:e.totalTime,dateAdded:(new Date).toLocaleDateString(),uri:e.uri,mealType:e.mealType,calories:e.calories||0,yield:e.yield||1,totalNutrients:{PROCNT:e.totalNutrients?.PROCNT||{quantity:0,unit:"g"},FAT:e.totalNutrients?.FAT||{quantity:0,unit:"g"},CHOCDF:e.totalNutrients?.CHOCDF||{quantity:0,unit:"g"},...e.totalNutrients||{}}},i=(0,f.rJ)(w,`users/${this.currentUserId}/favorites`),a=await(0,f.gS)(i,t);this.favoriteRecipes.push({id:a.id,...t}),alert("Recipe added to favorites!")}},isFavorite(e){return this.favoriteRecipes.some((t=>t.label===e.label))},viewDetails(e){const t=e.uri?encodeURIComponent(e.uri):e.id;console.log("Redirecting to Recipe Details with ID:",t),this.$router.push({name:"RecipeDetails",params:{id:t}})}}};const Jn=(0,m.A)(On,[["render",Qn],["__scopeId","data-v-ebf63c3a"]]);var Gn=Jn;const Bn={class:"community-page"};function Kn(e,t,i,a,r,o){const n=(0,s.g2)("CRecipeComponent");return(0,s.uX)(),(0,s.CE)("div",Bn,[(0,s.bF)(n)])}const jn={class:"recipe-list"},Yn={class:"header-container"},zn={class:"search-container"},Zn={key:0,class:"error-message"},el=["src"],tl={class:"recipe-content"},il={class:"interaction-section"},al={class:"like-section"},sl=["onClick"],rl=["onClick"],ol={key:2,class:"no-results"};function nl(e,t,i,r,o,n){const l=(0,s.g2)("CommentPopup");return(0,s.uX)(),(0,s.CE)("div",jn,[(0,s.Lk)("div",Yn,[(0,s.Lk)("div",zn,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),placeholder:"Search recipes by name or description...",class:"search-input",onInput:t[1]||(t[1]=(...e)=>n.handleSearch&&n.handleSearch(...e))},null,544),[[a.Jo,o.searchQuery]])]),(0,s.Lk)("button",{class:"post-recipe-btn",onClick:t[2]||(t[2]=(...e)=>n.navigateToPostRecipe&&n.navigateToPostRecipe(...e))},t[5]||(t[5]=[(0,s.Lk)("span",{class:"btn-icon"},"+",-1),(0,s.eW)(" Post New Recipe ")]))]),t[9]||(t[9]=(0,s.Lk)("h2",null,"Recipes",-1)),o.fetchError?((0,s.uX)(),(0,s.CE)("p",Zn,(0,x.v_)(o.fetchError),1)):(0,s.Q3)("",!0),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredRecipes,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"recipe-card"},[e.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.image,alt:"Recipe Image",class:"recipe-image"},null,8,el)):(0,s.Q3)("",!0),(0,s.Lk)("div",tl,[(0,s.Lk)("h3",null,(0,x.v_)(e.name),1),(0,s.Lk)("p",null,[t[6]||(t[6]=(0,s.Lk)("strong",null,"Description:",-1)),(0,s.eW)(" "+(0,x.v_)(e.description),1)]),(0,s.Lk)("p",null,[t[7]||(t[7]=(0,s.Lk)("strong",null,"Calories:",-1)),(0,s.eW)(" "+(0,x.v_)(e.calories),1)]),(0,s.Lk)("p",null,[t[8]||(t[8]=(0,s.Lk)("strong",null,"Estimated Time:",-1)),(0,s.eW)(" "+(0,x.v_)(e.estimatedTime)+" mins",1)]),(0,s.Lk)("div",il,[(0,s.Lk)("div",al,[(0,s.Lk)("button",{onClick:(0,a.D$)((t=>n.toggleLike(e)),["stop"]),class:(0,x.C4)({liked:e.isLiked})}," ❤️ "+(0,x.v_)(e.likeCount),11,sl)]),(0,s.Lk)("button",{onClick:(0,a.D$)((t=>n.openCommentPopup(e)),["stop"])}," 💬 "+(0,x.v_)(e.comments.length)+" Comments ",9,rl)])])])))),128))]),o.isCommentPopupOpen?((0,s.uX)(),(0,s.Wv)(l,{key:1,comments:o.currentRecipeComments,onClose:t[3]||(t[3]=e=>o.isCommentPopupOpen=!1),onAddComment:n.addComment,modelValue:o.newComment,"onUpdate:modelValue":t[4]||(t[4]=e=>o.newComment=e)},null,8,["comments","onAddComment","modelValue"])):(0,s.Q3)("",!0),0===n.filteredRecipes.length&&o.searchQuery?((0,s.uX)(),(0,s.CE)("p",ol," No recipes found matching your search. ")):(0,s.Q3)("",!0)])}async function ll(e){const t=(0,f.rJ)(w,"recipes");e.ingredients=Array.isArray(e.ingredients)?e.ingredients:[e.ingredients],e.likeCount=0,e.comments=[],await(0,f.gS)(t,e)}async function cl(e){const t=(0,f.rJ)(w,"drafts");await(0,f.gS)(t,e)}async function dl(){const e=(0,f.rJ)(w,"recipes"),t=await(0,f.GG)(e);return t.docs.map((e=>({id:e.id,...e.data()})))}async function ul(e){const t=(0,f.H9)(w,"recipes",e),i=await(0,f.x7)(t);if(i.exists())return{id:i.id,...i.data(),ingredients:i.data().ingredients||[]};throw new Error("No such recipe!")}async function pl(e,t){const i=(0,f.H9)(w,"recipes",e);await(0,f.mZ)(i,{likeCount:t})}async function hl(e,t){const i=(0,f.H9)(w,"recipes",e);await(0,f.mZ)(i,{comments:(0,f.hq)(t)})}const ml={class:"comments-list"};function gl(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",{class:"popup-overlay",onClick:t[5]||(t[5]=t=>e.$emit("close"))},[(0,s.Lk)("div",{class:"comment-popup",onClick:t[4]||(t[4]=(0,a.D$)((()=>{}),["stop"]))},[(0,s.Lk)("div",ml,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.comments,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,x.v_)(e),1)))),128))])]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localNewComment=e),placeholder:"Add a comment...",onKeypress:t[1]||(t[1]=(0,a.jR)(((...e)=>n.submitComment&&n.submitComment(...e)),["enter"]))},null,544),[[a.Jo,n.localNewComment]]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.submitComment&&n.submitComment(...e))},"Post Comment"),(0,s.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$emit("close"))},"Close")])])}var yl={props:{comments:Array,modelValue:String},computed:{localNewComment:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{submitComment(){this.localNewComment.trim()&&(this.$emit("add-comment",this.localNewComment),this.localNewComment="")}}};const kl=(0,m.A)(yl,[["render",gl],["__scopeId","data-v-2183b2f3"]]);var _l=kl,fl={components:{CommentPopup:_l},data(){return{recipes:[],searchQuery:"",fetchError:null,isCommentPopupOpen:!1,currentRecipeComments:[],newComment:""}},async mounted(){await this.fetchRecipes()},methods:{async fetchRecipes(){try{this.recipes=await dl(),this.recipes.forEach((e=>{e.isLiked=!1,e.newComment="",e.likeCount=e.likeCount||0,e.comments=e.comments||[]}))}catch(e){console.error("Error fetching recipes:",e),this.fetchError="Failed to load recipes. Please try again later."}},handleSearch(){},navigateToPostRecipe(){this.$router.push({name:"PostRecipe"})},async toggleLike(e){const t=e.isLiked;e.isLiked=!t,e.likeCount+=e.isLiked?1:-1;try{await pl(e.id,e.likeCount)}catch(i){console.error("Error updating likes:",i),e.isLiked=t,e.likeCount+=t?-1:1}},openCommentPopup(e){this.currentRecipeComments=e.comments,this.isCommentPopupOpen=!0},async addComment(e){const t=this.recipes.find((e=>e.comments===this.currentRecipeComments));t&&(t.comments.push(e),await hl(t.id,e)),this.newComment=""}},computed:{filteredRecipes(){if(!this.searchQuery)return this.recipes;const e=this.searchQuery.toLowerCase();return this.recipes.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}}};const vl=(0,m.A)(fl,[["render",nl],["__scopeId","data-v-e61834da"]]);var bl=vl,Ll=(0,s.pM)({name:"CommunityPage",components:{CRecipeComponent:bl}});const Cl=(0,m.A)(Ll,[["render",Kn]]);var wl=Cl;const Il={class:"dashboard"},El={key:0,class:"notification-bar"},Dl={class:"notification-bar__message"},xl={key:0},Rl={key:1,class:"notification-bar"},Pl={class:"dashboard__controls row"},Fl={class:"col-6"},Al={key:0,class:"col-6"},Sl=["value","disabled"],Ul={key:1,class:"col-6"},Xl={class:"dashboard__month-text"},Nl={class:"dashboard__chart-container"},Ml={key:0,class:"dashboard__chart"},Tl={key:0,ref:"itemsChart"},$l={key:1,class:"notification-bar__message"},Hl={key:1,class:"dashboard__chart"},Vl={key:0,ref:"expiredItemsChart"},Wl={key:1,class:"notification-bar__message"},ql={key:2,class:"dashboard__chart recipe-tracker-section"},Ql={class:"mt-3 notification-bar__message"};function Ol(e,t,i,r,o,n){const l=(0,s.g2)("RecipeTrackerDashboard");return(0,s.uX)(),(0,s.CE)("div",Il,[o.summary.expiringSoon>0?((0,s.uX)(),(0,s.CE)("div",El,[t[5]||(t[5]=(0,s.Lk)("i",{class:"fas fa-exclamation-circle notification-icon"},null,-1)),(0,s.Lk)("p",Dl,[(0,s.eW)(" Note: You have "+(0,x.v_)(o.summary.expiringSoon)+" item",1),o.summary.expiringSoon>1?((0,s.uX)(),(0,s.CE)("span",xl,"s")):(0,s.Q3)("",!0),t[4]||(t[4]=(0,s.eW)(" expiring soon! Please check the fridge inventory. "))])])):((0,s.uX)(),(0,s.CE)("div",Rl,t[6]||(t[6]=[(0,s.Lk)("i",{class:"fas fa-check-circle notification-icon"},null,-1),(0,s.Lk)("p",{class:"notification-bar__message"}," There are no items nearing expiration. ",-1)]))),t[10]||(t[10]=(0,s.Lk)("h2",{class:"dashboard__title"},"Your Fridge Dashboard",-1)),(0,s.Lk)("div",Pl,[(0,s.Lk)("div",Fl,[t[8]||(t[8]=(0,s.Lk)("label",{for:"chartSelector",class:"dashboard__label"},"View Data:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"chartSelector",class:"dashboard__selector","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedChart=e),onChange:t[1]||(t[1]=(...e)=>n.renderChart&&n.renderChart(...e))},t[7]||(t[7]=[(0,s.Lk)("option",{value:"items"},"Fridge Items",-1),(0,s.Lk)("option",{value:"expiredItems"},"Items Insight",-1),(0,s.Lk)("option",{value:"recipeTrackerDashboard"},"Recipe Insights",-1)]),544),[[a.u1,o.selectedChart]])]),"expiredItems"===o.selectedChart?((0,s.uX)(),(0,s.CE)("div",Al,[t[9]||(t[9]=(0,s.Lk)("label",{for:"monthSelector",class:"dashboard__label"},"Select Month:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"monthSelector",class:"dashboard__selector","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedMonth=e),onChange:t[3]||(t[3]=(...e)=>n.fetchSummaryData&&n.fetchSummaryData(...e))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.monthNames,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:t,disabled:n.isMonthInFuture(t)},(0,x.v_)(e),9,Sl)))),128))],544),[[a.u1,o.selectedMonth]])])):(0,s.Q3)("",!0),"items"===o.selectedChart?((0,s.uX)(),(0,s.CE)("div",Ul,[(0,s.Lk)("p",Xl,"Current Month: "+(0,x.v_)(o.monthNames[(new Date).getMonth()]),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Nl,["items"===o.selectedChart?((0,s.uX)(),(0,s.CE)("div",Ml,[o.hasDataForMonthItem?((0,s.uX)(),(0,s.CE)("canvas",Tl,null,512)):((0,s.uX)(),(0,s.CE)("p",$l,"No data available for Fridge Items."))])):(0,s.Q3)("",!0),"expiredItems"===o.selectedChart?((0,s.uX)(),(0,s.CE)("div",Hl,[o.hasDataForMonthExpired?((0,s.uX)(),(0,s.CE)("canvas",Vl,null,512)):((0,s.uX)(),(0,s.CE)("p",Wl,"No data available for Items Insight."))])):(0,s.Q3)("",!0),"recipeTrackerDashboard"===o.selectedChart?((0,s.uX)(),(0,s.CE)("div",ql,[(0,s.bF)(l)])):(0,s.Q3)("",!0),(0,s.Lk)("p",Ql,(0,x.v_)(o.message),1)])])}var Jl=i(3456);const Gl={class:"recipe-tracker-dashboard"},Bl={class:"stats-row"},Kl={class:"total-recipes"},jl={class:"number"},Yl={key:0,class:"most-cooked"},zl={class:"recipe-info"},Zl={class:"recipe-name"},ec={class:"cook-count"},tc={key:0,class:"chart-wrapper"},ic={ref:"chartCanvas"};function ac(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",Gl,[(0,s.Lk)("div",Bl,[(0,s.Lk)("div",Kl,[(0,s.Lk)("div",jl,(0,x.v_)(r.completedRecipes.length),1),t[0]||(t[0]=(0,s.Lk)("div",{class:"label"},"Total Recipes Cooked",-1))]),o.topRecipes.length?((0,s.uX)(),(0,s.CE)("div",Yl,[(0,s.Lk)("div",zl,[t[1]||(t[1]=(0,s.Lk)("h3",null,"Most Cooked Recipe",-1)),(0,s.Lk)("div",Zl,(0,x.v_)(o.topRecipes[0].label),1),(0,s.Lk)("div",ec,"Cooked "+(0,x.v_)(o.topRecipes[0].count)+" times",1)]),t[2]||(t[2]=(0,s.Lk)("div",{class:"recipe-image"},null,-1))])):(0,s.Q3)("",!0)]),r.dataLoaded?((0,s.uX)(),(0,s.CE)("div",tc,[(0,s.Lk)("canvas",ic,null,512)])):(0,s.Q3)("",!0)])}Jl.t1.register(...Jl.$L);var sc={name:"RecipeTrackerDashboard",data(){return{chart:null,completedRecipes:[],currentUserId:null,dataLoaded:!1}},computed:{topRecipes(){const e=this.completedRecipes.reduce(((e,t)=>(e[t.label]=(e[t.label]||0)+1,e)),{}),t=Object.entries(e).map((([e,t])=>({label:e,count:t}))).sort(((e,t)=>t.count-e.count));return t.length?[t[0]]:[]}},methods:{async initializeDashboard(){const e=(0,p.xI)();this.currentUserId=e.currentUser?.uid,this.currentUserId&&await this.loadCompletedRecipes()},async loadCompletedRecipes(){try{const e=(0,f.rJ)(w,`users/${this.currentUserId}/completedRecipes`),t=await(0,f.GG)(e);this.completedRecipes=t.docs.map((e=>({id:e.id,...e.data()}))),this.dataLoaded=!0,this.$nextTick((()=>{this.createChart()}))}catch(e){console.error("Error loading completed recipes:",e),this.completedRecipes=[]}},processChartData(){const e={};this.completedRecipes.forEach((t=>{if(t.completionDate){const i=t.completionDate;e[i]=(e[i]||0)+1}}));const t=Object.keys(e).sort(((e,t)=>{const[i,a,s]=e.split("/"),[r,o,n]=t.split("/");return new Date(s,i-1,a)-new Date(n,r-1,o)}));return{labels:t.length?t:["No data"],datasets:[{label:"Recipes Cooked",data:t.length?t.map((t=>e[t])):[0],borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.1,borderWidth:2,pointRadius:4,pointBackgroundColor:"#4CAF50"}]}},createChart(){this.chart&&this.chart.destroy();const e=this.$refs.chartCanvas;if(!e)return;const t=e.getContext("2d");if(t)try{this.chart=new Jl.t1(t,{type:"line",data:this.processChartData(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})}catch(i){console.error("Error creating chart:",i)}}},mounted(){this.initializeDashboard()},beforeUnmount(){this.chart&&this.chart.destroy()}};const rc=(0,m.A)(sc,[["render",ac],["__scopeId","data-v-89f0d9dc"]]);var oc=rc;Jl.t1.register(...Jl.$L);var nc={components:{RecipeTrackerDashboard:oc},data(){return{currentUserId:null,chartInstance:null,summary:{totalItems:0,expiringSoon:0,categories:{},usedItems:0,expiredItemsCount:0},message:"",selectedChart:"items",selectedMonth:(new Date).getMonth(),monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],hasDataForMonthItem:!1,hasDataForMonthExpired:!1,isRendering:!1}},methods:{debounce(e,t){let i;return function(...a){clearTimeout(i),i=setTimeout((()=>e.apply(this,a)),t)}},isMonthInFuture(e){const t=(new Date).getMonth();return e>t},async fetchSummaryData(){const e=new Date,t=new Date(e.getFullYear(),this.selectedMonth,1),i=new Date(e.getFullYear(),this.selectedMonth+1,0);try{const a=C.currentUser;if(!a)throw new Error("User not authenticated");this.currentUserId=a.uid;const s=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/items`)),r=s.docs.map((e=>({id:e.id,...e.data()})));this.summary.totalItems=r.length,this.hasDataForMonthItem=this.summary.totalItems>0;const o=new Date(e);o.setDate(e.getDate()+3),this.summary.expiringSoon=r.filter((t=>{const i=new Date(t.expiryDate);return i>e&&i<=o})).length;const n=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/expiredItemsWOUsing`)),l=n.docs.map((e=>({id:e.id,...e.data()})));this.summary.expiredItemsCount=l.filter((e=>{const a=new Date(e.expiryDate);return a>=t&&a<=i})).length;const c=await(0,f.GG)((0,f.rJ)(w,`users/${this.currentUserId}/deletedItems`)),d=c.docs.map((e=>({id:e.id,...e.data()})));this.summary.usedItems=d.filter((e=>{const a=new Date(e.deletedAt);return a>=t&&a<=i})).length,this.hasDataForMonthExpired=this.summary.expiredItemsCount>0||this.summary.usedItems>0,this.summary.categories=r.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+1,e)),{}),(this.hasDataForMonthItem||this.hasDataForMonthExpired)&&this.renderChart()}catch(a){console.error("Error fetching summary data: ",a)}},renderChart(){if("recipeTrackerDashboard"===this.selectedChart)return;if(this.message="",this.isRendering)return;if(this.isRendering=!0,"items"===this.selectedChart&&!this.hasDataForMonthItem||"expiredItems"===this.selectedChart&&!this.hasDataForMonthExpired)return console.warn("No data available for the selected chart:",this.selectedChart),void(this.isRendering=!1);let e=this.$refs["items"===this.selectedChart?"itemsChart":"expiredItemsChart"];if(!e)return console.warn("Canvas not available for selected chart:",this.selectedChart),void(this.isRendering=!1);try{const t=e.getContext("2d"),i=window.devicePixelRatio||1,a=e.clientWidth*i,s=e.clientHeight*i;e.width=a,e.height=s,t.scale(i,i),this.chartInstance&&this.chartInstance.destroy();const r={responsive:!0,maintainAspectRatio:!1};switch(this.selectedChart){case"items":{const e=Object.keys(this.summary.categories),i=Object.values(this.summary.categories);this.chartInstance=new Jl.t1(t,{type:"doughnut",data:{labels:e,datasets:[{label:"Items by Category",data:i,backgroundColor:this.getChartColors(i.length),borderWidth:1}]},options:r});break}case"expiredItems":this.chartInstance=new Jl.t1(t,{type:"doughnut",data:{labels:["Expired Items","Used Items"],datasets:[{label:"Count",data:[this.summary.expiredItemsCount,this.summary.usedItems],backgroundColor:this.getChartColors(2)}]},options:r}),this.updateMotivationalMessage();break}}catch(t){console.error("Error rendering chart:",t)}finally{this.isRendering=!1}},getChartColors(e){const t=[],i=[0,51,102],a=Math.floor(255/e);for(let s=0;s<e;s++){const e=Math.max(0,i[0]+s*a),r=Math.max(0,i[1]+s*a),o=Math.max(0,i[2]+s*a);t.push(`rgba(${e}, ${r}, ${o}, 0.8)`)}return t},updateMotivationalMessage(){this.summary.expiredItemsCount>this.summary.usedItems?this.message="Let's reduce waste! Remember to use items before they expire!":this.message="Great job! You're using items effectively!"}},mounted(){this.fetchSummaryData()},computed:{isDisabled(){return"items"===this.selectedChart}},watch:{selectedMonth(){this.fetchSummaryData()}}};const lc=(0,m.A)(nc,[["render",Ol],["__scopeId","data-v-0d8f45cf"]]);var cc=lc;const dc={class:"post-recipe-page"};function uc(e,t,i,a,r,o){const n=(0,s.g2)("PostRecipeComponent");return(0,s.uX)(),(0,s.CE)("div",dc,[(0,s.bF)(n)])}const pc={class:"post-recipe-container"},hc={class:"card"},mc={class:"card-header text-center"},gc={class:"card-body"},yc={class:"post-recipe-form"},kc={class:"mb-3"},_c={class:"mb-3"},fc={class:"row mb-3"},vc={class:"col"},bc={class:"col"},Lc={class:"mb-3"},Cc={class:"mb-3"},wc={class:"mb-3"},Ic={class:"d-flex justify-content-center mt-3"};function Ec(e,t,i,r,o,n){return(0,s.uX)(),(0,s.CE)("div",pc,[(0,s.Lk)("div",hc,[(0,s.Lk)("div",mc,[(0,s.Lk)("h2",null,(0,x.v_)(e.isEditing?"Edit Recipe":"Post New Recipe"),1)]),(0,s.Lk)("div",gc,[(0,s.Lk)("div",yc,[(0,s.Lk)("div",kc,[(0,s.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t)),class:"form-control",accept:"image/*"},null,32)]),(0,s.Lk)("div",_c,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.recipe.name=t),placeholder:"Name of Recipe",class:"form-control",required:""},null,512),[[a.Jo,e.recipe.name]])]),(0,s.Lk)("div",fc,[(0,s.Lk)("div",vc,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.recipe.estimatedTime=t),placeholder:"Estimated Time (mins)",type:"number",class:"form-control",required:""},null,512),[[a.Jo,e.recipe.estimatedTime]])]),(0,s.Lk)("div",bc,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.recipe.calories=t),placeholder:"Calories",type:"number",class:"form-control",required:""},null,512),[[a.Jo,e.recipe.calories]])])]),(0,s.Lk)("div",Lc,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.recipe.description=t),placeholder:"Description",class:"form-control",rows:"3",required:""},null,512),[[a.Jo,e.recipe.description]])]),(0,s.Lk)("div",Cc,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.recipe.ingredients=t),placeholder:"Ingredients (comma-separated)",class:"form-control",rows:"2",onInput:t[6]||(t[6]=t=>e.handleIngredientInput(e.recipe.ingredients)),required:""},null,544),[[a.Jo,e.recipe.ingredients]])]),(0,s.Lk)("div",wc,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.recipe.steps=t),placeholder:"Click Enter for a new step",class:"form-control",rows:"6",required:""},null,512),[[a.Jo,e.recipe.steps]])]),(0,s.Lk)("div",Ic,[(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...t)=>e.postRecipe&&e.postRecipe(...t)),class:"btn btn-success mx-2 shadow"},(0,x.v_)(e.isEditing?"Update":"Post"),1)])])])])])}var Dc=(0,s.pM)({name:"PostRecipeComponent",data(){return{recipe:{name:"",estimatedTime:null,calories:null,description:"",ingredients:[],steps:"",image:""},isEditing:!1}},methods:{onFileChange(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=()=>{this.recipe.image=e.result},e.readAsDataURL(t)}},handleIngredientInput(e){this.recipe.ingredients=e.split(",").map((e=>e.trim()))},async saveToDrafts(){try{await cl(this.recipe),console.log("Draft saved successfully")}catch(e){console.error("Error saving draft:",e)}},async postRecipe(){try{await ll(this.recipe),console.log("Recipe posted successfully"),this.$router.push("/community")}catch(e){console.error("Error posting recipe:",e)}}}});const xc=(0,m.A)(Dc,[["render",Ec],["__scopeId","data-v-543cb858"]]);var Rc=xc,Pc=(0,s.pM)({name:"PostRecipePage",components:{PostRecipeComponent:Rc}});const Fc=(0,m.A)(Pc,[["render",uc]]);var Ac=Fc;const Sc={class:"recipe-detail-page"};function Uc(e,t,i,a,r,o){const n=(0,s.g2)("RecipeDeComponent");return(0,s.uX)(),(0,s.CE)("div",Sc,[(0,s.bF)(n,{recipeId:e.$route.params.id},null,8,["recipeId"])])}const Xc={class:"recipe-details"},Nc=["src"],Mc=["src"],Tc={class:"additional-info"},$c={class:"info-item"},Hc={class:"info-item"},Vc={class:"ingredients-list"},Wc={class:"recipe-steps"};function qc(e,t,i,a,r,o){return(0,s.uX)(),(0,s.CE)("div",Xc,[(0,s.Lk)("div",{class:"recipe-image-wrapper",onClick:t[0]||(t[0]=e=>r.showFullImage=!0)},[r.recipe.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.recipe.image,alt:"Recipe Image",class:"recipe-image"},null,8,Nc)):(0,s.Q3)("",!0)]),r.showFullImage?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[1]||(t[1]=e=>r.showFullImage=!1)},[(0,s.Lk)("img",{src:r.recipe.image,alt:"Full Recipe Image",class:"full-image"},null,8,Mc)])):(0,s.Q3)("",!0),(0,s.Lk)("h1",null,(0,x.v_)(r.recipe.name),1),(0,s.Lk)("p",null,(0,x.v_)(r.recipe.description),1),(0,s.Lk)("div",Tc,[(0,s.Lk)("p",$c,"⏰ Estimated Time: "+(0,x.v_)(r.recipe.estimatedTime)+" minutes",1),(0,s.Lk)("p",Hc,"🍽️ Calories: "+(0,x.v_)(r.recipe.calories),1)]),t[3]||(t[3]=(0,s.Lk)("h3",null,"Ingredients",-1)),(0,s.Lk)("ul",Vc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.recipe.ingredients,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,x.v_)(e),1)))),128))]),t[4]||(t[4]=(0,s.Lk)("h3",null,"Steps",-1)),(0,s.Lk)("ol",Wc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.recipe.steps,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,x.v_)(e),1)))),128))]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.cookNow&&o.cookNow(...e)),class:"btn btn-success mx-2 shadow"},"Cook Now")])}var Qc={props:{recipeId:{type:String,required:!0}},data(){return{showFullImage:!1,recipe:{ingredients:[],steps:[]}}},methods:{async fetchRecipeDetails(){try{this.recipe=await ul(this.recipeId),this.recipe.steps&&(this.recipe.steps=this.recipe.steps.split("\n"))}catch(e){console.error("Failed to fetch recipe details:",e)}},cookNow(){console.log("Cooking",this.recipe.name)}},mounted(){this.fetchRecipeDetails()}};const Oc=(0,m.A)(Qc,[["render",qc],["__scopeId","data-v-22e7bbc5"]]);var Jc=Oc,Gc=(0,s.pM)({name:"RecipeDetailPage",components:{RecipeDeComponent:Jc}});const Bc=(0,m.A)(Gc,[["render",Uc],["__scopeId","data-v-30633338"]]);var Kc=Bc;const jc=[{path:"/",name:"Home",component:j,meta:{requiresAuth:!0}},{path:"/fridge",name:"Fridge",component:Ve,meta:{requiresAuth:!0}},{path:"/summary",name:"Summary",component:tt,meta:{requiresAuth:!0}},{path:"/customize",name:"Customize",component:ot,meta:{requiresAuth:!0}},{path:"/mealPlanner",name:"MealPlanner",component:Ba,meta:{requiresAuth:!0}},{path:"/community",name:"Community",component:wl,meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:cc,meta:{requiresAuth:!0}},{path:"/community/postrecipe",name:"PostRecipe",component:Ac,meta:{requiresAuth:!0}},{path:"/recipes",name:"RecipeList",component:$o,meta:{requiresAuth:!0}},{path:"/recipe/:id",name:"RecipeDetails",component:nn,meta:{requiresAuth:!0}},{path:"/recipe/:id/cook",name:"CookNow",component:Sn,meta:{requiresAuth:!0}},{path:"/favourites",name:"Favourites",component:Gn,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:us},{path:"/register",name:"Register",component:Fs},{path:"/reset-password",name:"ResetPassword",component:Qs},{path:"/recipe/:id",name:"RecipeDetail",component:Kc,props:!0},{path:"/profile",name:"ProfileSettings",component:jr,meta:{requiresAuth:!0}},{path:"/logout",name:"Logout",component:oo,meta:{requiresAuth:!0}}],Yc=(0,k.aE)({history:(0,k.LA)(),routes:jc});Yc.beforeEach(((e,t,i)=>{const a=e.matched.some((e=>e.meta.requiresAuth)),s=C.currentUser;a&&!s?i("/login"):i()}));var zc=Yc;C.onAuthStateChanged((e=>{e?(console.log("User is logged in:",e),console.log("Logged in user:",e.email,e.uid,e.displayName),localStorage.setItem("user",JSON.stringify({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}))):(console.log("No user logged in"),localStorage.removeItem("user"))})),(0,a.Ef)(y).use(zc).mount("#app")},1621:function(e,t,i){e.exports=i.p+"img/healthychef.1d06c104.png"}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,a,s,r){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],r=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](a[l])}))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,s,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(l)var d=l(i)}for(t&&t(a);c<o.length;c++)r=o[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(8631)}));a=i.O(a)})();
//# sourceMappingURL=app.adb2a85e.js.map